[2026-02-28T09:34:11.171Z] === NEW REQUEST ===
[2026-02-28T09:34:11.180Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:34:11.181Z] Message: "ambroxol syrup"
[2026-02-28T09:34:11.183Z] Persisted session: undefined
[2026-02-28T09:34:11.185Z] Starting new session
[2026-02-28T09:34:11.189Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:34:11.192Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:34:11.194Z] Stage: initial
[2026-02-28T09:34:11.197Z] Pending medicine: null
[2026-02-28T09:34:11.199Z] Message: "ambroxol syrup"
[2026-02-28T09:34:11.201Z] Is digits: false
[2026-02-28T09:34:11.204Z] Condition match: false
[2026-02-28T09:34:11.213Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:34:11.217Z] Message: "ambroxol syrup"
[2026-02-28T09:34:11.219Z] Stage: initial
[2026-02-28T09:34:11.221Z] Pending medicine: null
[2026-02-28T09:34:11.746Z] Grok result: {"medicines":[{"name":"ambroxol syrup","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:34:11.748Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:34:11.750Z] Processing medicine: ambroxol syrup, quantity: 1
[2026-02-28T09:34:11.759Z] Found medicine: Ambroxol Syrup
[2026-02-28T09:34:11.767Z] Real-time stock update for Ambroxol Syrup: 949 -> 948 tablets (packets: 94 -> 94, individual: 8)
[2026-02-28T09:34:11.780Z] === SENDING RESPONSE ===
[2026-02-28T09:34:11.782Z] âœ… Ambroxol Syrup (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹880.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹880.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T09:34:11.784Z] === END RESPONSE ===
[2026-02-28T09:34:36.931Z] === NEW REQUEST ===
[2026-02-28T09:34:36.933Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:34:36.935Z] Message: "ambroxol syrup to quantity"
[2026-02-28T09:34:36.936Z] Persisted session: undefined
[2026-02-28T09:34:36.940Z] Starting new session
[2026-02-28T09:34:36.943Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:34:36.946Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:34:36.947Z] Stage: initial
[2026-02-28T09:34:36.949Z] Pending medicine: null
[2026-02-28T09:34:36.951Z] Message: "ambroxol syrup to quantity"
[2026-02-28T09:34:36.953Z] Is digits: false
[2026-02-28T09:34:36.955Z] Condition match: false
[2026-02-28T09:34:36.960Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:34:36.961Z] Message: "ambroxol syrup to quantity"
[2026-02-28T09:34:36.963Z] Stage: initial
[2026-02-28T09:34:36.964Z] Pending medicine: null
[2026-02-28T09:34:37.624Z] Grok result: {"medicines":[{"name":"ambroxol syrup to quantity","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:34:37.626Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:34:37.627Z] Processing medicine: ambroxol syrup to quantity, quantity: 1
[2026-02-28T09:35:10.087Z] === NEW REQUEST ===
[2026-02-28T09:35:10.089Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:35:10.091Z] Message: "order the approximate syrup"
[2026-02-28T09:35:10.093Z] Persisted session: undefined
[2026-02-28T09:35:10.095Z] Starting new session
[2026-02-28T09:35:10.099Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:35:10.104Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:35:10.107Z] Stage: initial
[2026-02-28T09:35:10.111Z] Pending medicine: null
[2026-02-28T09:35:10.113Z] Message: "order the approximate syrup"
[2026-02-28T09:35:10.115Z] Is digits: false
[2026-02-28T09:35:10.117Z] Condition match: false
[2026-02-28T09:35:10.119Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:35:10.121Z] Message: "order the approximate syrup"
[2026-02-28T09:35:10.126Z] Stage: initial
[2026-02-28T09:35:10.128Z] Pending medicine: null
[2026-02-28T09:35:10.693Z] Grok result: {"medicines":[{"name":"order the approximate syrup","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:35:10.694Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:35:10.696Z] Processing medicine: order the approximate syrup, quantity: 1
[2026-02-28T09:35:24.904Z] === NEW REQUEST ===
[2026-02-28T09:35:24.907Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:35:24.910Z] Message: "combiflam tablet"
[2026-02-28T09:35:24.912Z] Persisted session: undefined
[2026-02-28T09:35:24.913Z] Starting new session
[2026-02-28T09:35:24.919Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:35:24.922Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:35:24.924Z] Stage: initial
[2026-02-28T09:35:24.936Z] Pending medicine: null
[2026-02-28T09:35:24.973Z] Message: "combiflam tablet"
[2026-02-28T09:35:24.979Z] Is digits: false
[2026-02-28T09:35:24.991Z] Condition match: false
[2026-02-28T09:35:25.000Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:35:25.012Z] Message: "combiflam tablet"
[2026-02-28T09:35:25.015Z] Stage: initial
[2026-02-28T09:35:25.024Z] Pending medicine: null
[2026-02-28T09:35:25.594Z] Grok result: {"medicines":[{"name":"combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:35:25.596Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:35:25.597Z] Processing medicine: combiflam tablet, quantity: 1
[2026-02-28T09:35:25.729Z] Found medicine: Combiflam Tablets
[2026-02-28T09:35:25.732Z] Real-time stock update for Combiflam Tablets: 1336 -> 1335 tablets (packets: 66 -> 66, individual: 15)
[2026-02-28T09:35:25.782Z] === SENDING RESPONSE ===
[2026-02-28T09:35:25.783Z] âœ… Combiflam Tablets (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹315.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹315.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T09:35:25.786Z] === END RESPONSE ===
[2026-02-28T09:36:09.302Z] === NEW REQUEST ===
[2026-02-28T09:36:09.304Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:36:09.308Z] Message: "Combiflam Tablets -2"
[2026-02-28T09:36:09.312Z] Persisted session: undefined
[2026-02-28T09:36:09.318Z] Starting new session
[2026-02-28T09:36:09.322Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:36:09.323Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:36:09.325Z] Stage: initial
[2026-02-28T09:36:09.327Z] Pending medicine: null
[2026-02-28T09:36:09.329Z] Message: "Combiflam Tablets -2"
[2026-02-28T09:36:09.330Z] Is digits: false
[2026-02-28T09:36:09.333Z] Condition match: false
[2026-02-28T09:36:09.336Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:36:09.338Z] Message: "Combiflam Tablets -2"
[2026-02-28T09:36:09.340Z] Stage: initial
[2026-02-28T09:36:09.341Z] Pending medicine: null
[2026-02-28T09:36:09.852Z] Grok result: {"medicines":[{"name":"Combiflam Tablets","quantity":2}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:36:09.854Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:36:09.855Z] Processing medicine: Combiflam Tablets, quantity: 2
[2026-02-28T09:36:09.859Z] Found medicine: Combiflam Tablets
[2026-02-28T09:36:09.862Z] Real-time stock update for Combiflam Tablets: 1335 -> 1333 tablets (packets: 66 -> 66, individual: 13)
[2026-02-28T09:36:09.873Z] === SENDING RESPONSE ===
[2026-02-28T09:36:09.874Z] âœ… Combiflam Tablets (2 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹315.00
ðŸ“¦ Quantity: 2
ðŸ’° Total price: â‚¹630.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T09:36:09.876Z] === END RESPONSE ===
[2026-02-28T09:39:25.186Z] === NEW REQUEST ===
[2026-02-28T09:39:25.188Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:39:25.189Z] Message: "Paracetamol 500 mg tablet"
[2026-02-28T09:39:25.198Z] Persisted session: undefined
[2026-02-28T09:39:25.201Z] Starting new session
[2026-02-28T09:39:25.203Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:39:25.205Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:39:25.206Z] Stage: initial
[2026-02-28T09:39:25.208Z] Pending medicine: null
[2026-02-28T09:39:25.210Z] Message: "Paracetamol 500 mg tablet"
[2026-02-28T09:39:25.219Z] Is digits: false
[2026-02-28T09:39:25.222Z] Condition match: false
[2026-02-28T09:39:25.226Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:39:25.232Z] Message: "Paracetamol 500 mg tablet"
[2026-02-28T09:39:25.234Z] Stage: initial
[2026-02-28T09:39:25.236Z] Pending medicine: null
[2026-02-28T09:39:25.738Z] Grok result: {"medicines":[{"name":"Paracetamol 500 mg tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:39:25.739Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:39:25.741Z] Processing medicine: Paracetamol 500 mg tablet, quantity: 1
[2026-02-28T09:40:24.935Z] === NEW REQUEST ===
[2026-02-28T09:40:24.937Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:40:24.944Z] Message: "Aceclofenac Tabletten -1"
[2026-02-28T09:40:24.951Z] Persisted session: undefined
[2026-02-28T09:40:24.953Z] Starting new session
[2026-02-28T09:40:24.957Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:40:24.959Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:40:24.961Z] Stage: initial
[2026-02-28T09:40:24.962Z] Pending medicine: null
[2026-02-28T09:40:24.964Z] Message: "Aceclofenac Tabletten -1"
[2026-02-28T09:40:24.965Z] Is digits: false
[2026-02-28T09:40:24.967Z] Condition match: false
[2026-02-28T09:40:24.969Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:40:24.972Z] Message: "Aceclofenac Tabletten -1"
[2026-02-28T09:40:24.975Z] Stage: initial
[2026-02-28T09:40:24.977Z] Pending medicine: null
[2026-02-28T09:40:25.586Z] Grok result: {"medicines":[{"name":"Aceclofenac Tabletten","quantity":1}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:40:25.587Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:40:25.589Z] Processing medicine: Aceclofenac Tabletten, quantity: 1
[2026-02-28T09:40:25.592Z] Found medicine: Aceclofenac Tabletten
[2026-02-28T09:40:25.595Z] Real-time stock update for Aceclofenac Tabletten: 7 -> 6 tablets (packets: 0 -> Infinity, individual: NaN)
[2026-02-28T09:40:33.608Z] === NEW REQUEST ===
[2026-02-28T09:40:33.612Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:40:33.619Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:40:33.621Z] Persisted session: undefined
[2026-02-28T09:40:33.623Z] Starting new session
[2026-02-28T09:40:33.625Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:40:33.626Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:40:33.628Z] Stage: initial
[2026-02-28T09:40:33.630Z] Pending medicine: null
[2026-02-28T09:40:33.631Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:40:33.635Z] Is digits: false
[2026-02-28T09:40:33.637Z] Condition match: false
[2026-02-28T09:40:33.639Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:40:33.640Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:40:33.642Z] Stage: initial
[2026-02-28T09:40:33.643Z] Pending medicine: null
[2026-02-28T09:40:34.067Z] Grok result: {"medicines":[{"name":"Aceclofenac Tabletten","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:40:34.068Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:40:34.069Z] Processing medicine: Aceclofenac Tabletten, quantity: 1
[2026-02-28T09:40:34.073Z] Found medicine: Aceclofenac Tabletten
[2026-02-28T09:40:34.076Z] Real-time stock update for Aceclofenac Tabletten: 7 -> 6 tablets (packets: 0 -> Infinity, individual: NaN)
[2026-02-28T09:40:42.229Z] === NEW REQUEST ===
[2026-02-28T09:40:42.230Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:40:42.230Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:40:42.231Z] Persisted session: undefined
[2026-02-28T09:40:42.234Z] Starting new session
[2026-02-28T09:40:42.235Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:40:42.236Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:40:42.237Z] Stage: initial
[2026-02-28T09:40:42.238Z] Pending medicine: null
[2026-02-28T09:40:42.238Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:40:42.239Z] Is digits: false
[2026-02-28T09:40:42.239Z] Condition match: false
[2026-02-28T09:40:42.240Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:40:42.241Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:40:42.241Z] Stage: initial
[2026-02-28T09:40:42.242Z] Pending medicine: null
[2026-02-28T09:40:42.697Z] Grok result: {"medicines":[{"name":"Aceclofenac Tabletten","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:40:42.699Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:40:42.700Z] Processing medicine: Aceclofenac Tabletten, quantity: 1
[2026-02-28T09:40:42.703Z] Found medicine: Aceclofenac Tabletten
[2026-02-28T09:40:42.706Z] Real-time stock update for Aceclofenac Tabletten: 7 -> 6 tablets (packets: 0 -> Infinity, individual: NaN)
[2026-02-28T09:44:32.742Z] === NEW REQUEST ===
[2026-02-28T09:44:32.743Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:44:32.745Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:44:32.746Z] Persisted session: undefined
[2026-02-28T09:44:32.747Z] Starting new session
[2026-02-28T09:44:32.748Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:44:32.749Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:44:32.750Z] Stage: initial
[2026-02-28T09:44:32.750Z] Pending medicine: null
[2026-02-28T09:44:32.751Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:44:32.752Z] Is digits: false
[2026-02-28T09:44:32.753Z] Condition match: false
[2026-02-28T09:44:32.754Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:44:32.754Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:44:32.755Z] Stage: initial
[2026-02-28T09:44:32.755Z] Pending medicine: null
[2026-02-28T09:44:33.387Z] Grok result: {"medicines":[{"name":"Aceclofenac Tabletten","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:44:33.388Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:44:33.388Z] Processing medicine: Aceclofenac Tabletten, quantity: 1
[2026-02-28T09:44:33.391Z] Found medicine: Aceclofenac Tabletten
[2026-02-28T09:44:33.392Z] Real-time stock update for Aceclofenac Tabletten: 7 -> 6 tablets (packets: 0 -> 6, individual: 0)
[2026-02-28T09:44:33.440Z] === SENDING RESPONSE ===
[2026-02-28T09:44:33.440Z] âœ… Aceclofenac Tabletten (1 tablets)
ðŸ“ General tablets or capsules taken by mouth to treat specific symptoms and improve health.
ðŸ’Š Price per tablet: â‚¹0.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹0.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T09:44:33.441Z] === END RESPONSE ===
[2026-02-28T09:49:16.347Z] === NEW REQUEST ===
[2026-02-28T09:49:16.349Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:49:16.351Z] Message: "combiflam tablet"
[2026-02-28T09:49:16.353Z] Persisted session: undefined
[2026-02-28T09:49:16.354Z] Starting new session
[2026-02-28T09:49:16.358Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:49:16.362Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:49:16.365Z] Stage: initial
[2026-02-28T09:49:16.367Z] Pending medicine: null
[2026-02-28T09:49:16.369Z] Message: "combiflam tablet"
[2026-02-28T09:49:16.370Z] Is digits: false
[2026-02-28T09:49:16.371Z] Condition match: false
[2026-02-28T09:49:16.372Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:49:16.375Z] Message: "combiflam tablet"
[2026-02-28T09:49:16.378Z] Stage: initial
[2026-02-28T09:49:16.379Z] Pending medicine: null
[2026-02-28T09:49:17.228Z] Grok result: {"medicines":[{"name":"combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:49:17.231Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:49:17.233Z] Processing medicine: combiflam tablet, quantity: 1
[2026-02-28T09:49:17.248Z] Found medicine: Combiflam Tablets
[2026-02-28T09:49:17.253Z] Real-time stock update for Combiflam Tablets: 1333 -> 1332 tablets (packets: 66 -> 66, individual: 12)
[2026-02-28T09:49:17.303Z] === SENDING RESPONSE ===
[2026-02-28T09:49:17.305Z] âœ… Combiflam Tablets (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹315.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹315.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T09:49:17.306Z] === END RESPONSE ===
[2026-02-28T09:49:35.118Z] === NEW REQUEST ===
[2026-02-28T09:49:35.125Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:49:35.128Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:49:35.130Z] Persisted session: undefined
[2026-02-28T09:49:35.133Z] Starting new session
[2026-02-28T09:49:35.136Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:49:35.138Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:49:35.141Z] Stage: initial
[2026-02-28T09:49:35.144Z] Pending medicine: null
[2026-02-28T09:49:35.147Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:49:35.149Z] Is digits: false
[2026-02-28T09:49:35.150Z] Condition match: false
[2026-02-28T09:49:35.152Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:49:35.153Z] Message: "Aceclofenac Tabletten"
[2026-02-28T09:49:35.155Z] Stage: initial
[2026-02-28T09:49:35.158Z] Pending medicine: null
[2026-02-28T09:49:35.688Z] Grok result: {"medicines":[{"name":"Aceclofenac Tabletten","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T09:49:35.690Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:49:35.691Z] Processing medicine: Aceclofenac Tabletten, quantity: 1
[2026-02-28T09:49:35.696Z] Found medicine: Aceclofenac Tabletten
[2026-02-28T09:49:46.037Z] === NEW REQUEST ===
[2026-02-28T09:49:46.040Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:49:46.043Z] Message: "Restock Medicine"
[2026-02-28T09:49:46.046Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":2633,"medicineName":"Aceclofenac Tabletten","quantity":null}},"expiresAt":1772303400000}
[2026-02-28T09:49:46.048Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T09:49:46.050Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:49:53.744Z] === NEW REQUEST ===
[2026-02-28T09:49:53.745Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:49:53.747Z] Message: "20"
[2026-02-28T09:49:53.749Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"ask_restock_qty","medicineId":2633,"medicineName":"Aceclofenac Tabletten","quantity":null}},"expiresAt":1772303400000}
[2026-02-28T09:49:53.750Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T09:49:53.752Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:50:25.668Z] === NEW REQUEST ===
[2026-02-28T09:50:25.669Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:50:25.671Z] Message: "90, 7"
[2026-02-28T09:50:25.675Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"ask_restock_price","medicineId":2633,"medicineName":"Aceclofenac Tabletten","quantity":20}},"expiresAt":1772303400000}
[2026-02-28T09:50:25.679Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T09:50:25.691Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:50:33.500Z] === NEW REQUEST ===
[2026-02-28T09:50:33.501Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:50:33.505Z] Message: "90"
[2026-02-28T09:50:33.517Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T09:50:33.523Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T09:50:33.526Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:50:33.529Z] Numeric-only message while not awaiting quantity -> returning guidance
[2026-02-28T09:56:51.061Z] === NEW REQUEST ===
[2026-02-28T09:56:51.062Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T09:56:51.063Z] Message: "Ambroxol Syrup -1"
[2026-02-28T09:56:51.065Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T09:56:51.069Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T09:56:51.072Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T09:56:51.073Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T09:56:51.075Z] Stage: initial
[2026-02-28T09:56:51.076Z] Pending medicine: null
[2026-02-28T09:56:51.077Z] Message: "Ambroxol Syrup -1"
[2026-02-28T09:56:51.079Z] Is digits: false
[2026-02-28T09:56:51.081Z] Condition match: false
[2026-02-28T09:56:51.083Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T09:56:51.084Z] Message: "Ambroxol Syrup -1"
[2026-02-28T09:56:51.085Z] Stage: initial
[2026-02-28T09:56:51.086Z] Pending medicine: null
[2026-02-28T09:56:51.529Z] Grok result: {"medicines":[{"name":"Ambroxol Syrup","quantity":1}],"intent":"order","action":"check_stock","language":"en"}
[2026-02-28T09:56:51.531Z] === ORDER INTENT DETECTED ===
[2026-02-28T09:56:51.532Z] Processing medicine: Ambroxol Syrup, quantity: 1
[2026-02-28T09:56:51.535Z] Found medicine: Ambroxol Syrup
[2026-02-28T09:56:51.537Z] Real-time stock update for Ambroxol Syrup: 948 -> 947 tablets (packets: 94 -> 94, individual: 7)
[2026-02-28T09:56:51.585Z] === SENDING RESPONSE ===
[2026-02-28T09:56:51.586Z] âœ… Ambroxol Syrup (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹880.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹880.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T09:56:51.588Z] === END RESPONSE ===
[2026-02-28T10:53:26.517Z] === NEW REQUEST ===
[2026-02-28T10:53:26.519Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T10:53:26.527Z] Message: "play Khatri topics"
[2026-02-28T10:53:26.531Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T10:53:26.533Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T10:53:26.535Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T10:53:26.544Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T10:53:26.550Z] Stage: initial
[2026-02-28T10:53:26.565Z] Pending medicine: null
[2026-02-28T10:53:26.569Z] Message: "play Khatri topics"
[2026-02-28T10:53:26.573Z] Is digits: false
[2026-02-28T10:53:26.576Z] Condition match: false
[2026-02-28T10:53:26.581Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T10:53:26.583Z] Message: "play Khatri topics"
[2026-02-28T10:53:26.585Z] Stage: initial
[2026-02-28T10:53:26.586Z] Pending medicine: null
[2026-02-28T10:53:27.246Z] Grok result: {"medicines":[{"name":"play Khatri topics","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T10:53:27.247Z] === ORDER INTENT DETECTED ===
[2026-02-28T10:53:27.249Z] Processing medicine: play Khatri topics, quantity: 1
[2026-02-28T10:53:44.551Z] === NEW REQUEST ===
[2026-02-28T10:53:44.553Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T10:53:44.561Z] Message: "combiflam tablet"
[2026-02-28T10:53:44.566Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T10:53:44.569Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T10:53:44.573Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T10:53:44.591Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T10:53:44.596Z] Stage: initial
[2026-02-28T10:53:44.614Z] Pending medicine: null
[2026-02-28T10:53:44.617Z] Message: "combiflam tablet"
[2026-02-28T10:53:44.620Z] Is digits: false
[2026-02-28T10:53:44.629Z] Condition match: false
[2026-02-28T10:53:44.631Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T10:53:44.633Z] Message: "combiflam tablet"
[2026-02-28T10:53:44.634Z] Stage: initial
[2026-02-28T10:53:44.637Z] Pending medicine: null
[2026-02-28T10:53:45.065Z] Grok result: {"medicines":[{"name":"combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T10:53:45.067Z] === ORDER INTENT DETECTED ===
[2026-02-28T10:53:45.068Z] Processing medicine: combiflam tablet, quantity: 1
[2026-02-28T10:53:45.073Z] Found medicine: Combiflam Tablets
[2026-02-28T10:53:45.077Z] Real-time stock update for Combiflam Tablets: 1332 -> 1331 tablets (packets: 66 -> 66, individual: 11)
[2026-02-28T10:53:45.114Z] === SENDING RESPONSE ===
[2026-02-28T10:53:45.116Z] âœ… Combiflam Tablets (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹315.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹315.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T10:53:45.117Z] === END RESPONSE ===
[2026-02-28T10:54:10.900Z] === NEW REQUEST ===
[2026-02-28T10:54:10.902Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T10:54:10.905Z] Message: "Combiflam Tablets -5"
[2026-02-28T10:54:10.908Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T10:54:10.915Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T10:54:10.918Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T10:54:10.921Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T10:54:10.924Z] Stage: initial
[2026-02-28T10:54:10.927Z] Pending medicine: null
[2026-02-28T10:54:10.929Z] Message: "Combiflam Tablets -5"
[2026-02-28T10:54:10.931Z] Is digits: false
[2026-02-28T10:54:10.932Z] Condition match: false
[2026-02-28T10:54:10.934Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T10:54:10.937Z] Message: "Combiflam Tablets -5"
[2026-02-28T10:54:10.940Z] Stage: initial
[2026-02-28T10:54:10.944Z] Pending medicine: null
[2026-02-28T10:54:11.410Z] Grok result: {"medicines":[{"name":"Combiflam Tablets","quantity":5}],"intent":"order","action":"order","language":"en"}
[2026-02-28T10:54:11.411Z] === ORDER INTENT DETECTED ===
[2026-02-28T10:54:11.413Z] Processing medicine: Combiflam Tablets, quantity: 5
[2026-02-28T10:54:11.417Z] Found medicine: Combiflam Tablets
[2026-02-28T10:54:11.420Z] Real-time stock update for Combiflam Tablets: 1331 -> 1326 tablets (packets: 66 -> 66, individual: 6)
[2026-02-28T10:54:11.430Z] === SENDING RESPONSE ===
[2026-02-28T10:54:11.431Z] âœ… Combiflam Tablets (5 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹315.00
ðŸ“¦ Quantity: 5
ðŸ’° Total price: â‚¹1575.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T10:54:11.433Z] === END RESPONSE ===
[2026-02-28T12:21:52.425Z] === NEW REQUEST ===
[2026-02-28T12:21:52.426Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:21:52.427Z] Message: "I want to Paracetamol"
[2026-02-28T12:21:52.427Z] Persisted session: undefined
[2026-02-28T12:21:52.428Z] Starting new session
[2026-02-28T12:21:52.429Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:21:52.432Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:21:52.433Z] Stage: initial
[2026-02-28T12:21:52.434Z] Pending medicine: null
[2026-02-28T12:21:52.434Z] Message: "I want to Paracetamol"
[2026-02-28T12:21:52.435Z] Is digits: false
[2026-02-28T12:21:52.435Z] Condition match: false
[2026-02-28T12:21:52.436Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:21:52.437Z] Message: "I want to Paracetamol"
[2026-02-28T12:21:52.439Z] Stage: initial
[2026-02-28T12:21:52.440Z] Pending medicine: null
[2026-02-28T12:21:53.044Z] Grok result: {"medicines":[{"name":"I want to Paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T12:21:53.045Z] === ORDER INTENT DETECTED ===
[2026-02-28T12:21:53.045Z] Processing medicine: I want to Paracetamol, quantity: 1
[2026-02-28T12:23:00.852Z] === NEW REQUEST ===
[2026-02-28T12:23:00.852Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:23:00.854Z] Message: "order died in syrup"
[2026-02-28T12:23:00.855Z] Persisted session: undefined
[2026-02-28T12:23:00.857Z] Starting new session
[2026-02-28T12:23:00.858Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:23:00.859Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:23:00.861Z] Stage: initial
[2026-02-28T12:23:00.862Z] Pending medicine: null
[2026-02-28T12:23:00.863Z] Message: "order died in syrup"
[2026-02-28T12:23:00.864Z] Is digits: false
[2026-02-28T12:23:00.865Z] Condition match: false
[2026-02-28T12:23:00.865Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:23:00.866Z] Message: "order died in syrup"
[2026-02-28T12:23:00.867Z] Stage: initial
[2026-02-28T12:23:00.867Z] Pending medicine: null
[2026-02-28T12:23:01.283Z] Grok result: {"medicines":[{"name":"order died in syrup","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T12:23:01.284Z] === ORDER INTENT DETECTED ===
[2026-02-28T12:23:01.285Z] Processing medicine: order died in syrup, quantity: 1
[2026-02-28T12:23:23.827Z] === NEW REQUEST ===
[2026-02-28T12:23:23.828Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:23:23.829Z] Message: "Digene syrup"
[2026-02-28T12:23:23.829Z] Persisted session: undefined
[2026-02-28T12:23:23.830Z] Starting new session
[2026-02-28T12:23:23.831Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:23:23.832Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:23:23.834Z] Stage: initial
[2026-02-28T12:23:23.837Z] Pending medicine: null
[2026-02-28T12:23:23.838Z] Message: "Digene syrup"
[2026-02-28T12:23:23.838Z] Is digits: false
[2026-02-28T12:23:23.838Z] Condition match: false
[2026-02-28T12:23:23.839Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:23:23.839Z] Message: "Digene syrup"
[2026-02-28T12:23:23.840Z] Stage: initial
[2026-02-28T12:23:23.841Z] Pending medicine: null
[2026-02-28T12:23:24.265Z] Grok result: {"medicines":[{"name":"Digene syrup","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T12:23:24.265Z] === ORDER INTENT DETECTED ===
[2026-02-28T12:23:24.266Z] Processing medicine: Digene syrup, quantity: 1
[2026-02-28T12:23:24.305Z] Found medicine: Digene Syrup
[2026-02-28T12:23:24.308Z] Real-time stock update for Digene Syrup: 1932 -> 1931 tablets (packets: 138 -> 137, individual: 13)
[2026-02-28T12:23:24.328Z] === SENDING RESPONSE ===
[2026-02-28T12:23:24.328Z] âœ… Digene Syrup (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹592.86
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹592.86

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T12:23:24.329Z] === END RESPONSE ===
[2026-02-28T12:54:19.926Z] === NEW REQUEST ===
[2026-02-28T12:54:19.930Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:54:19.931Z] Message: "do you have a digestion"
[2026-02-28T12:54:19.933Z] Persisted session: undefined
[2026-02-28T12:54:19.935Z] Starting new session
[2026-02-28T12:54:19.942Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:54:19.944Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:54:19.946Z] Stage: initial
[2026-02-28T12:54:19.948Z] Pending medicine: null
[2026-02-28T12:54:19.950Z] Message: "do you have a digestion"
[2026-02-28T12:54:19.952Z] Is digits: false
[2026-02-28T12:54:19.957Z] Condition match: false
[2026-02-28T12:54:19.960Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:54:19.962Z] Message: "do you have a digestion"
[2026-02-28T12:54:19.964Z] Stage: initial
[2026-02-28T12:54:19.967Z] Pending medicine: null
[2026-02-28T12:54:21.035Z] Grok result: {"medicines":[{"name":"digestion","quantity":null}],"intent":"check_stock","action":"check_stock","language":"en"}
[2026-02-28T12:54:30.660Z] === NEW REQUEST ===
[2026-02-28T12:54:30.663Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:54:30.666Z] Message: "do you have a diligence syrup"
[2026-02-28T12:54:30.669Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"offer_add_missing","language":"en","targetName":"digestion","lastMissingName":"digestion","previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T12:54:30.672Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T12:54:30.675Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:54:30.679Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:54:30.681Z] Stage: initial
[2026-02-28T12:54:30.683Z] Pending medicine: null
[2026-02-28T12:54:30.685Z] Message: "do you have a diligence syrup"
[2026-02-28T12:54:30.689Z] Is digits: false
[2026-02-28T12:54:30.692Z] Condition match: false
[2026-02-28T12:54:30.693Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:54:30.695Z] Message: "do you have a diligence syrup"
[2026-02-28T12:54:30.697Z] Stage: initial
[2026-02-28T12:54:30.698Z] Pending medicine: null
[2026-02-28T12:54:31.354Z] Grok result: {"medicines":[{"name":"diligence syrup","quantity":null}],"intent":"check_stock","action":"check_stock","language":"en"}
[2026-02-28T12:54:53.557Z] === NEW REQUEST ===
[2026-02-28T12:54:53.560Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:54:53.563Z] Message: "order dighzen syrup"
[2026-02-28T12:54:53.565Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"offer_add_missing","language":"en","targetName":"diligence syrup","lastMissingName":"diligence syrup","previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T12:54:53.568Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T12:54:53.573Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:54:53.575Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:54:53.577Z] Stage: initial
[2026-02-28T12:54:53.579Z] Pending medicine: null
[2026-02-28T12:54:53.581Z] Message: "order dighzen syrup"
[2026-02-28T12:54:53.583Z] Is digits: false
[2026-02-28T12:54:53.587Z] Condition match: false
[2026-02-28T12:54:53.589Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:54:53.591Z] Message: "order dighzen syrup"
[2026-02-28T12:54:53.592Z] Stage: initial
[2026-02-28T12:54:53.594Z] Pending medicine: null
[2026-02-28T12:54:54.407Z] Grok result: {"medicines":[{"name":"order dighzen syrup","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T12:54:54.410Z] === ORDER INTENT DETECTED ===
[2026-02-28T12:54:54.411Z] Processing medicine: order dighzen syrup, quantity: 1
[2026-02-28T12:55:28.653Z] === NEW REQUEST ===
[2026-02-28T12:55:28.655Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:55:28.657Z] Message: "order combiflam tablets"
[2026-02-28T12:55:28.660Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"offer_add_missing","language":"en","targetName":"diligence syrup","lastMissingName":"diligence syrup","previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T12:55:28.663Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T12:55:28.668Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:55:28.670Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:55:28.672Z] Stage: initial
[2026-02-28T12:55:28.674Z] Pending medicine: null
[2026-02-28T12:55:28.677Z] Message: "order combiflam tablets"
[2026-02-28T12:55:28.679Z] Is digits: false
[2026-02-28T12:55:28.681Z] Condition match: false
[2026-02-28T12:55:28.684Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:55:28.687Z] Message: "order combiflam tablets"
[2026-02-28T12:55:28.689Z] Stage: initial
[2026-02-28T12:55:28.691Z] Pending medicine: null
[2026-02-28T12:55:29.747Z] Grok result: {"medicines":[{"name":"order combiflam tablets","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T12:55:29.748Z] === ORDER INTENT DETECTED ===
[2026-02-28T12:55:29.753Z] Processing medicine: order combiflam tablets, quantity: 1
[2026-02-28T12:55:41.429Z] === NEW REQUEST ===
[2026-02-28T12:55:41.431Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T12:55:41.435Z] Message: "do you have combiflam tablet"
[2026-02-28T12:55:41.438Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"offer_add_missing","language":"en","targetName":"diligence syrup","lastMissingName":"diligence syrup","previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T12:55:41.440Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T12:55:41.443Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T12:55:41.448Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T12:55:41.454Z] Stage: initial
[2026-02-28T12:55:41.457Z] Pending medicine: null
[2026-02-28T12:55:41.459Z] Message: "do you have combiflam tablet"
[2026-02-28T12:55:41.461Z] Is digits: false
[2026-02-28T12:55:41.463Z] Condition match: false
[2026-02-28T12:55:41.466Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T12:55:41.469Z] Message: "do you have combiflam tablet"
[2026-02-28T12:55:41.473Z] Stage: initial
[2026-02-28T12:55:41.476Z] Pending medicine: null
[2026-02-28T12:55:42.219Z] Grok result: {"medicines":[{"name":"do you have combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T12:55:42.221Z] === ORDER INTENT DETECTED ===
[2026-02-28T12:55:42.223Z] Processing medicine: do you have combiflam tablet, quantity: 1
[2026-02-28T14:09:00.632Z] === NEW REQUEST ===
[2026-02-28T14:09:00.633Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:09:00.636Z] Message: "order combiflam tablet"
[2026-02-28T14:09:00.637Z] Persisted session: undefined
[2026-02-28T14:09:00.638Z] Starting new session
[2026-02-28T14:09:00.639Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:09:00.640Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:09:00.640Z] Stage: initial
[2026-02-28T14:09:00.642Z] Pending medicine: null
[2026-02-28T14:09:00.643Z] Message: "order combiflam tablet"
[2026-02-28T14:09:00.644Z] Is digits: false
[2026-02-28T14:09:00.646Z] Condition match: false
[2026-02-28T14:09:00.647Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:09:00.647Z] Message: "order combiflam tablet"
[2026-02-28T14:09:00.648Z] Stage: initial
[2026-02-28T14:09:00.651Z] Pending medicine: null
[2026-02-28T14:09:02.000Z] Grok result: {"medicines":[{"name":"order combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:09:02.000Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:09:02.001Z] Processing medicine: order combiflam tablet, quantity: 1
[2026-02-28T14:20:59.438Z] === NEW REQUEST ===
[2026-02-28T14:20:59.440Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:20:59.442Z] Message: "order combiflam tablet"
[2026-02-28T14:20:59.443Z] Persisted session: undefined
[2026-02-28T14:20:59.445Z] Starting new session
[2026-02-28T14:20:59.447Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:20:59.450Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:20:59.451Z] Stage: initial
[2026-02-28T14:20:59.452Z] Pending medicine: null
[2026-02-28T14:20:59.453Z] Message: "order combiflam tablet"
[2026-02-28T14:20:59.454Z] Is digits: false
[2026-02-28T14:20:59.457Z] Condition match: false
[2026-02-28T14:20:59.458Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:20:59.459Z] Message: "order combiflam tablet"
[2026-02-28T14:20:59.460Z] Stage: initial
[2026-02-28T14:20:59.461Z] Pending medicine: null
[2026-02-28T14:21:00.169Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:21:00.170Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:21:00.172Z] Processing medicine: combiflam, quantity: null
[2026-02-28T14:21:16.314Z] === NEW REQUEST ===
[2026-02-28T14:21:16.328Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:21:16.333Z] Message: "5"
[2026-02-28T14:21:16.342Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:21:16.346Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:21:16.348Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:21:16.351Z] Entering EARLY quantity branch with qty='5' for pending='{"id":2591,"name":"Combiflam Tablets"}'
[2026-02-28T14:21:16.470Z] DB match for pending: Combiflam Tablets
[2026-02-28T14:21:16.473Z] Real-time stock update for Combiflam Tablets: 1326 -> 1321 tablets (packets: 66 -> 66, individual: 1)
[2026-02-28T14:21:16.596Z] EARLY ADDâœ… Combiflam Tablets x5 | Cart: â‚¹1575.00
[2026-02-28T14:21:39.364Z] === NEW REQUEST ===
[2026-02-28T14:21:39.367Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:21:39.378Z] Message: "why"
[2026-02-28T14:21:39.383Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:21:39.386Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T14:21:39.388Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:21:39.391Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:21:39.395Z] Stage: initial
[2026-02-28T14:21:39.397Z] Pending medicine: null
[2026-02-28T14:21:39.402Z] Message: "why"
[2026-02-28T14:21:39.404Z] Is digits: false
[2026-02-28T14:21:39.410Z] Condition match: false
[2026-02-28T14:21:39.413Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:21:39.417Z] Message: "why"
[2026-02-28T14:21:39.418Z] Stage: initial
[2026-02-28T14:21:39.421Z] Pending medicine: null
[2026-02-28T14:21:40.049Z] Grok result: {"medicines":[{"name":"why","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:21:40.050Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:21:40.053Z] Processing medicine: why, quantity: null
[2026-02-28T14:21:54.761Z] === NEW REQUEST ===
[2026-02-28T14:21:54.763Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:21:54.767Z] Message: "why"
[2026-02-28T14:21:54.769Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:21:54.771Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T14:21:54.774Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:21:54.777Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:21:54.778Z] Stage: initial
[2026-02-28T14:21:54.781Z] Pending medicine: null
[2026-02-28T14:21:54.783Z] Message: "why"
[2026-02-28T14:21:54.785Z] Is digits: false
[2026-02-28T14:21:54.787Z] Condition match: false
[2026-02-28T14:21:54.789Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:21:54.791Z] Message: "why"
[2026-02-28T14:21:54.796Z] Stage: initial
[2026-02-28T14:21:54.799Z] Pending medicine: null
[2026-02-28T14:21:55.885Z] Grok result: {"medicines":[{"name":"why","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:21:55.887Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:21:55.889Z] Processing medicine: why, quantity: null
[2026-02-28T14:22:09.478Z] === NEW REQUEST ===
[2026-02-28T14:22:09.480Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:22:09.484Z] Message: "yes yes"
[2026-02-28T14:22:09.489Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:22:09.500Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T14:22:09.508Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:22:09.514Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:22:09.521Z] Stage: initial
[2026-02-28T14:22:09.527Z] Pending medicine: null
[2026-02-28T14:22:09.534Z] Message: "yes yes"
[2026-02-28T14:22:09.538Z] Is digits: false
[2026-02-28T14:22:09.542Z] Condition match: false
[2026-02-28T14:22:09.548Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:22:09.549Z] Message: "yes yes"
[2026-02-28T14:22:09.556Z] Stage: initial
[2026-02-28T14:22:09.559Z] Pending medicine: null
[2026-02-28T14:22:10.116Z] Grok result: {"medicines":[{"name":"yes yes","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:22:10.118Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:22:10.121Z] Processing medicine: yes yes, quantity: null
[2026-02-28T14:22:37.741Z] === NEW REQUEST ===
[2026-02-28T14:22:37.743Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:22:37.748Z] Message: "combiflam"
[2026-02-28T14:22:37.753Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:22:37.759Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T14:22:37.765Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:22:37.768Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:22:37.777Z] Stage: initial
[2026-02-28T14:22:37.782Z] Pending medicine: null
[2026-02-28T14:22:37.785Z] Message: "combiflam"
[2026-02-28T14:22:37.790Z] Is digits: false
[2026-02-28T14:22:37.792Z] Condition match: false
[2026-02-28T14:22:37.795Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:22:37.796Z] Message: "combiflam"
[2026-02-28T14:22:37.799Z] Stage: initial
[2026-02-28T14:22:37.805Z] Pending medicine: null
[2026-02-28T14:22:38.313Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:22:38.315Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:22:38.317Z] Processing medicine: combiflam, quantity: null
[2026-02-28T14:23:19.496Z] === NEW REQUEST ===
[2026-02-28T14:23:19.498Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:23:19.501Z] Message: "two quantity"
[2026-02-28T14:23:19.503Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:23:19.505Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:23:19.507Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:23:19.510Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:23:19.518Z] Stage: ask_quantity
[2026-02-28T14:23:19.520Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:23:19.523Z] Message: "two quantity"
[2026-02-28T14:23:19.531Z] Is digits: false
[2026-02-28T14:23:19.534Z] Condition match: false
[2026-02-28T14:23:19.537Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:23:19.540Z] Message: "two quantity"
[2026-02-28T14:23:19.544Z] Stage: ask_quantity
[2026-02-28T14:23:19.547Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:23:20.065Z] Grok result: {"medicines":[{"name":"two quantity","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:23:20.067Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:23:20.068Z] Processing medicine: two quantity, quantity: null
[2026-02-28T14:24:11.064Z] === NEW REQUEST ===
[2026-02-28T14:24:11.066Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:24:11.070Z] Message: "combiflam"
[2026-02-28T14:24:11.073Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:24:11.077Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:24:11.081Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:11.093Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:24:11.095Z] Stage: ask_quantity
[2026-02-28T14:24:11.098Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:11.101Z] Message: "combiflam"
[2026-02-28T14:24:11.104Z] Is digits: false
[2026-02-28T14:24:11.107Z] Condition match: false
[2026-02-28T14:24:11.110Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:24:11.112Z] Message: "combiflam"
[2026-02-28T14:24:11.115Z] Stage: ask_quantity
[2026-02-28T14:24:11.121Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:11.722Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:24:11.724Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:24:11.726Z] Processing medicine: combiflam, quantity: null
[2026-02-28T14:24:25.132Z] === NEW REQUEST ===
[2026-02-28T14:24:25.134Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:24:25.137Z] Message: "please order combiflam tablets for quantity"
[2026-02-28T14:24:25.142Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:24:25.147Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:24:25.150Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:25.156Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:24:25.159Z] Stage: ask_quantity
[2026-02-28T14:24:25.161Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:25.163Z] Message: "please order combiflam tablets for quantity"
[2026-02-28T14:24:25.165Z] Is digits: false
[2026-02-28T14:24:25.168Z] Condition match: false
[2026-02-28T14:24:25.172Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:24:25.174Z] Message: "please order combiflam tablets for quantity"
[2026-02-28T14:24:25.176Z] Stage: ask_quantity
[2026-02-28T14:24:25.178Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:25.661Z] Grok result: {"medicines":[{"name":"please order combiflam tablets for quantity","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:24:25.663Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:24:25.665Z] Processing medicine: please order combiflam tablets for quantity, quantity: null
[2026-02-28T14:24:36.636Z] === NEW REQUEST ===
[2026-02-28T14:24:36.641Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:24:36.649Z] Message: "tablets"
[2026-02-28T14:24:36.688Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:24:36.691Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:24:36.694Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:36.698Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:24:36.705Z] Stage: ask_quantity
[2026-02-28T14:24:36.718Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:36.725Z] Message: "tablets"
[2026-02-28T14:24:36.744Z] Is digits: false
[2026-02-28T14:24:36.746Z] Condition match: false
[2026-02-28T14:24:36.748Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:24:36.750Z] Message: "tablets"
[2026-02-28T14:24:36.752Z] Stage: ask_quantity
[2026-02-28T14:24:36.753Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:37.208Z] Grok result: {"medicines":[{"name":"tablets","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:24:37.212Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:24:37.215Z] Processing medicine: tablets, quantity: null
[2026-02-28T14:24:38.731Z] === NEW REQUEST ===
[2026-02-28T14:24:38.733Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:24:38.736Z] Message: "combiflam"
[2026-02-28T14:24:38.739Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:24:38.747Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:24:38.759Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:38.763Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:24:38.776Z] Stage: ask_quantity
[2026-02-28T14:24:38.779Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:38.781Z] Message: "combiflam"
[2026-02-28T14:24:38.784Z] Is digits: false
[2026-02-28T14:24:38.790Z] Condition match: false
[2026-02-28T14:24:38.795Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:24:38.802Z] Message: "combiflam"
[2026-02-28T14:24:38.807Z] Stage: ask_quantity
[2026-02-28T14:24:38.810Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:24:39.277Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:24:39.279Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:24:39.281Z] Processing medicine: combiflam, quantity: null
[2026-02-28T14:37:01.089Z] === NEW REQUEST ===
[2026-02-28T14:37:01.092Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:37:01.094Z] Message: "order diseases in syrup syrup"
[2026-02-28T14:37:01.100Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:37:01.104Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:37:01.109Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:37:01.111Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:37:01.114Z] Stage: ask_quantity
[2026-02-28T14:37:01.119Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:37:01.122Z] Message: "order diseases in syrup syrup"
[2026-02-28T14:37:01.127Z] Is digits: false
[2026-02-28T14:37:01.133Z] Condition match: false
[2026-02-28T14:37:01.137Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:37:01.140Z] Message: "order diseases in syrup syrup"
[2026-02-28T14:37:01.143Z] Stage: ask_quantity
[2026-02-28T14:37:01.146Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:37:01.800Z] Grok result: {"medicines":[{"name":"order diseases in syrup syrup","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:37:01.802Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:37:01.803Z] Processing medicine: order diseases in syrup syrup, quantity: null
[2026-02-28T14:38:21.732Z] === NEW REQUEST ===
[2026-02-28T14:38:21.733Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:38:21.736Z] Message: "order Paracetamol"
[2026-02-28T14:38:21.741Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:38:21.744Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:38:21.750Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:38:21.753Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:38:21.793Z] Stage: ask_quantity
[2026-02-28T14:38:21.794Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:38:21.796Z] Message: "order Paracetamol"
[2026-02-28T14:38:21.797Z] Is digits: false
[2026-02-28T14:38:21.799Z] Condition match: false
[2026-02-28T14:38:21.802Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:38:21.804Z] Message: "order Paracetamol"
[2026-02-28T14:38:21.808Z] Stage: ask_quantity
[2026-02-28T14:38:21.810Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:38:22.326Z] Grok result: {"medicines":[{"name":"order Paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:38:22.327Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:38:22.329Z] Processing medicine: order Paracetamol, quantity: null
[2026-02-28T14:38:30.338Z] === NEW REQUEST ===
[2026-02-28T14:38:30.340Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:38:30.342Z] Message: "500"
[2026-02-28T14:38:30.345Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:38:30.347Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T14:38:30.352Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T14:38:30.355Z] Entering EARLY quantity branch with qty='500' for pending='{"id":2591,"name":"Combiflam Tablets"}'
[2026-02-28T14:38:30.361Z] DB match for pending: Combiflam Tablets
[2026-02-28T14:38:30.366Z] Real-time stock update for Combiflam Tablets: 1321 -> 821 tablets (packets: 66 -> 41, individual: 1)
[2026-02-28T14:38:30.416Z] EARLY ADDâœ… Combiflam Tablets x500 | Cart: â‚¹159075.00
[2026-02-28T14:39:05.888Z] === NEW REQUEST ===
[2026-02-28T14:39:05.889Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T14:39:05.891Z] Message: "dashboard"
[2026-02-28T14:39:05.893Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575},{"id":2591,"name":"Combiflam Tablets","quantity":500,"price_per_tablet":"315.00","total_price":157500}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T14:39:05.895Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T14:39:05.897Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T14:39:05.899Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T14:39:05.902Z] Stage: initial
[2026-02-28T14:39:05.905Z] Pending medicine: null
[2026-02-28T14:39:05.907Z] Message: "dashboard"
[2026-02-28T14:39:05.909Z] Is digits: false
[2026-02-28T14:39:05.910Z] Condition match: false
[2026-02-28T14:39:05.913Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T14:39:05.916Z] Message: "dashboard"
[2026-02-28T14:39:05.918Z] Stage: initial
[2026-02-28T14:39:05.921Z] Pending medicine: null
[2026-02-28T14:39:06.578Z] Grok result: {"medicines":[{"name":"dashboard","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T14:39:06.580Z] === ORDER INTENT DETECTED ===
[2026-02-28T14:39:06.582Z] Processing medicine: dashboard, quantity: null
[2026-02-28T16:46:47.464Z] === NEW REQUEST ===
[2026-02-28T16:46:47.468Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T16:46:47.476Z] Message: "Paracetamol apodiscounter 500 mg Tabletten -2"
[2026-02-28T16:46:47.482Z] Persisted session: undefined
[2026-02-28T16:46:47.486Z] Starting new session
[2026-02-28T16:46:47.492Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T16:46:47.497Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T16:46:47.500Z] Stage: initial
[2026-02-28T16:46:47.504Z] Pending medicine: null
[2026-02-28T16:46:47.509Z] Message: "Paracetamol apodiscounter 500 mg Tabletten -2"
[2026-02-28T16:46:47.512Z] Is digits: false
[2026-02-28T16:46:47.513Z] Condition match: false
[2026-02-28T16:46:47.518Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T16:46:47.520Z] Message: "Paracetamol apodiscounter 500 mg Tabletten -2"
[2026-02-28T16:46:47.522Z] Stage: initial
[2026-02-28T16:46:47.524Z] Pending medicine: null
[2026-02-28T16:46:48.511Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2}],"intent":"order","action":"order","language":"en"}
[2026-02-28T16:46:48.512Z] === ORDER INTENT DETECTED ===
[2026-02-28T16:46:48.513Z] Processing medicine: Paracetamol apodiscounter 500 mg Tabletten, quantity: 2
[2026-02-28T16:46:48.518Z] Found medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-02-28T16:46:55.628Z] === NEW REQUEST ===
[2026-02-28T16:46:55.630Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T16:46:55.635Z] Message: "yes"
[2026-02-28T16:46:55.638Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T16:46:55.641Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T16:46:55.645Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T16:46:55.649Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T16:46:55.651Z] Stage: initial
[2026-02-28T16:46:55.653Z] Pending medicine: null
[2026-02-28T16:46:55.656Z] Message: "yes"
[2026-02-28T16:46:55.659Z] Is digits: false
[2026-02-28T16:46:55.662Z] Condition match: false
[2026-02-28T16:46:55.665Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T16:46:55.666Z] Message: "yes"
[2026-02-28T16:46:55.669Z] Stage: initial
[2026-02-28T16:46:55.672Z] Pending medicine: null
[2026-02-28T16:46:55.676Z] === PRESCRIPTION YES RESPONSE DETECTED ===
[2026-02-28T16:46:55.681Z] Real-time stock update for Paracetamol apodiscounter 500 mg Tabletten: 1760 -> 1758 tablets (packets: 88 -> 87, individual: 18)
[2026-02-28T16:46:55.717Z] === SENDING PRESCRIPTION CONFIRMED RESPONSE ===
[2026-02-28T16:46:55.719Z] âœ… Paracetamol apodiscounter 500 mg Tabletten (2 tablets)
ðŸ’Š Price per tablet: â‚¹100.00
ðŸ“¦ Quantity: 2
ðŸ’° Total price: â‚¹200.00

ðŸŽ‰ Order Placed Successfully!

âš•ï¸ Prescription verified - Order completed safely
[2026-02-28T16:46:55.721Z] === END RESPONSE ===
[2026-02-28T17:20:12.496Z] === NEW REQUEST ===
[2026-02-28T17:20:12.499Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:20:12.501Z] Message: "combiflam tablet please"
[2026-02-28T17:20:12.504Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:20:12.506Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:20:12.508Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:20:12.510Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:20:12.512Z] Stage: initial
[2026-02-28T17:20:12.514Z] Pending medicine: null
[2026-02-28T17:20:12.516Z] Message: "combiflam tablet please"
[2026-02-28T17:20:12.518Z] Is digits: false
[2026-02-28T17:20:12.519Z] Condition match: false
[2026-02-28T17:20:12.520Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:20:12.522Z] Message: "combiflam tablet please"
[2026-02-28T17:20:12.523Z] Stage: initial
[2026-02-28T17:20:12.524Z] Pending medicine: null
[2026-02-28T17:20:13.926Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T17:20:13.929Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:20:13.931Z] Processing medicine: combiflam, quantity: null
[2026-02-28T17:20:20.953Z] === NEW REQUEST ===
[2026-02-28T17:20:20.957Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:20:20.965Z] Message: "5"
[2026-02-28T17:20:20.968Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:20:20.972Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T17:20:20.974Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:20:20.977Z] Entering EARLY quantity branch with qty='5' for pending='{"id":2591,"name":"Combiflam Tablets"}'
[2026-02-28T17:20:20.984Z] DB match for pending: Combiflam Tablets
[2026-02-28T17:20:20.989Z] Real-time stock update for Combiflam Tablets: 821 -> 816 tablets (packets: 41 -> 40, individual: 16)
[2026-02-28T17:20:21.034Z] EARLY ADDâœ… Combiflam Tablets x5 | Cart: â‚¹1575.00
[2026-02-28T17:21:05.327Z] === NEW REQUEST ===
[2026-02-28T17:21:05.347Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:21:05.350Z] Message: "years"
[2026-02-28T17:21:05.354Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:21:05.358Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:21:05.360Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:21:05.362Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:21:05.366Z] Stage: initial
[2026-02-28T17:21:05.369Z] Pending medicine: null
[2026-02-28T17:21:05.372Z] Message: "years"
[2026-02-28T17:21:05.374Z] Is digits: false
[2026-02-28T17:21:05.377Z] Condition match: false
[2026-02-28T17:21:05.380Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:21:05.386Z] Message: "years"
[2026-02-28T17:21:05.388Z] Stage: initial
[2026-02-28T17:21:05.394Z] Pending medicine: null
[2026-02-28T17:21:06.412Z] Grok result: {"medicines":[{"name":"years","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T17:21:06.415Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:21:06.416Z] Processing medicine: years, quantity: null
[2026-02-28T17:44:02.120Z] === NEW REQUEST ===
[2026-02-28T17:44:02.121Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:44:02.122Z] Message: "please order combiflam tablet"
[2026-02-28T17:44:02.125Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:44:02.127Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:44:02.128Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:44:02.130Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:44:02.135Z] Stage: initial
[2026-02-28T17:44:02.137Z] Pending medicine: null
[2026-02-28T17:44:02.140Z] Message: "please order combiflam tablet"
[2026-02-28T17:44:02.141Z] Is digits: false
[2026-02-28T17:44:02.143Z] Condition match: false
[2026-02-28T17:44:02.151Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:44:02.152Z] Message: "please order combiflam tablet"
[2026-02-28T17:44:02.153Z] Stage: initial
[2026-02-28T17:44:02.154Z] Pending medicine: null
[2026-02-28T17:44:02.896Z] Grok result: {"medicines":[{"name":"please order combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T17:44:02.898Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:44:02.899Z] Processing medicine: please order combiflam tablet, quantity: null
[2026-02-28T17:44:22.593Z] === NEW REQUEST ===
[2026-02-28T17:44:22.595Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:44:22.598Z] Message: "do you have combiflam tablet"
[2026-02-28T17:44:22.600Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:44:22.604Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:44:22.612Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:44:22.616Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:44:22.622Z] Stage: initial
[2026-02-28T17:44:22.627Z] Pending medicine: null
[2026-02-28T17:44:22.629Z] Message: "do you have combiflam tablet"
[2026-02-28T17:44:22.634Z] Is digits: false
[2026-02-28T17:44:22.636Z] Condition match: false
[2026-02-28T17:44:22.636Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:44:22.638Z] Message: "do you have combiflam tablet"
[2026-02-28T17:44:22.640Z] Stage: initial
[2026-02-28T17:44:22.642Z] Pending medicine: null
[2026-02-28T17:44:23.238Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"check_stock","action":"check_stock","language":"en"}
[2026-02-28T17:44:23.361Z] Setting pending medicine to: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:34.904Z] === NEW REQUEST ===
[2026-02-28T17:44:34.907Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:44:34.910Z] Message: "to tablets"
[2026-02-28T17:44:34.912Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:44:34.913Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T17:44:34.916Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:34.918Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:44:34.920Z] Stage: ask_quantity
[2026-02-28T17:44:34.923Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:34.925Z] Message: "to tablets"
[2026-02-28T17:44:34.927Z] Is digits: false
[2026-02-28T17:44:34.931Z] Condition match: false
[2026-02-28T17:44:34.933Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:44:34.935Z] Message: "to tablets"
[2026-02-28T17:44:34.941Z] Stage: ask_quantity
[2026-02-28T17:44:34.945Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:35.412Z] Grok result: {"medicines":[{"name":"to tablets","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T17:44:35.446Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:44:35.449Z] Processing medicine: to tablets, quantity: null
[2026-02-28T17:44:45.009Z] === NEW REQUEST ===
[2026-02-28T17:44:45.012Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:44:45.015Z] Message: "to"
[2026-02-28T17:44:45.017Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:44:45.018Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T17:44:45.020Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:45.022Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:44:45.024Z] Stage: ask_quantity
[2026-02-28T17:44:45.025Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:45.027Z] Message: "to"
[2026-02-28T17:44:45.030Z] Is digits: false
[2026-02-28T17:44:45.033Z] Condition match: false
[2026-02-28T17:44:45.036Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:44:45.038Z] Message: "to"
[2026-02-28T17:44:45.042Z] Stage: ask_quantity
[2026-02-28T17:44:45.043Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T17:44:45.546Z] Grok result: {"medicines":[{"name":"to","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T17:44:45.550Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:44:45.552Z] Processing medicine: to, quantity: null
[2026-02-28T17:48:37.462Z] === NEW REQUEST ===
[2026-02-28T17:48:37.463Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:48:37.465Z] Message: "0"
[2026-02-28T17:48:37.467Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575}],"stage":"ask_quantity","pendingMedicine":{"id":2517,"name":"NORSAN Omega-3 Total"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:48:37.469Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T17:48:37.470Z] Top-of-handler state: stage=ask_quantity, pending={"id":2517,"name":"NORSAN Omega-3 Total"}
[2026-02-28T17:48:37.471Z] Entering EARLY quantity branch with qty='0' for pending='{"id":2517,"name":"NORSAN Omega-3 Total"}'
[2026-02-28T17:48:37.668Z] DB match for pending: NORSAN Omega-3 Total
[2026-02-28T17:48:37.671Z] Real-time stock update for NORSAN Omega-3 Total: 2430 -> 2430 tablets (packets: 81 -> 81, individual: 0)
[2026-02-28T17:48:37.698Z] EARLY ADDâœ… NORSAN Omega-3 Total x0 | Cart: â‚¹1575.00
[2026-02-28T17:48:45.396Z] === NEW REQUEST ===
[2026-02-28T17:48:45.403Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:48:45.405Z] Message: "N"
[2026-02-28T17:48:45.406Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":5,"price_per_tablet":"315.00","total_price":1575},{"id":2517,"name":"NORSAN Omega-3 Total","quantity":0,"price_per_tablet":"50.00","total_price":0}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:48:45.407Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:48:45.409Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:48:45.411Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:48:45.413Z] Stage: initial
[2026-02-28T17:48:45.415Z] Pending medicine: null
[2026-02-28T17:48:45.417Z] Message: "N"
[2026-02-28T17:48:45.419Z] Is digits: false
[2026-02-28T17:48:45.420Z] Condition match: false
[2026-02-28T17:48:45.421Z] User cancelled current cart (N) before checkout
[2026-02-28T17:48:51.044Z] === NEW REQUEST ===
[2026-02-28T17:48:51.045Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:48:51.047Z] Message: "ok"
[2026-02-28T17:48:51.049Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null}},"expiresAt":1772303400000}
[2026-02-28T17:48:51.050Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:48:51.051Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:48:51.051Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:48:51.052Z] Stage: initial
[2026-02-28T17:48:51.053Z] Pending medicine: null
[2026-02-28T17:48:51.053Z] Message: "ok"
[2026-02-28T17:48:51.054Z] Is digits: false
[2026-02-28T17:48:51.055Z] Condition match: false
[2026-02-28T17:48:51.055Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:48:51.056Z] Message: "ok"
[2026-02-28T17:48:51.057Z] Stage: initial
[2026-02-28T17:48:51.057Z] Pending medicine: null
[2026-02-28T17:48:51.759Z] Grok result: {"medicines":[{"name":"ok","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T17:48:51.760Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:48:51.761Z] Processing medicine: ok, quantity: null
[2026-02-28T17:49:00.564Z] === NEW REQUEST ===
[2026-02-28T17:49:00.565Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T17:49:00.567Z] Message: "Aceclofenac Tabletten -1"
[2026-02-28T17:49:00.571Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772303400000}
[2026-02-28T17:49:00.573Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T17:49:00.575Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T17:49:00.577Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T17:49:00.581Z] Stage: initial
[2026-02-28T17:49:00.585Z] Pending medicine: null
[2026-02-28T17:49:00.586Z] Message: "Aceclofenac Tabletten -1"
[2026-02-28T17:49:00.586Z] Is digits: false
[2026-02-28T17:49:00.587Z] Condition match: false
[2026-02-28T17:49:00.588Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T17:49:00.588Z] Message: "Aceclofenac Tabletten -1"
[2026-02-28T17:49:00.590Z] Stage: initial
[2026-02-28T17:49:00.592Z] Pending medicine: null
[2026-02-28T17:49:01.226Z] Grok result: {"medicines":[{"name":"Aceclofenac","quantity":1}],"intent":"order","action":"check_stock","language":"en"}
[2026-02-28T17:49:01.227Z] === ORDER INTENT DETECTED ===
[2026-02-28T17:49:01.227Z] Processing medicine: Aceclofenac, quantity: 1
[2026-02-28T17:49:01.230Z] Found medicine: Aceclofenac Tabletten
[2026-02-28T17:49:01.231Z] Real-time stock update for Aceclofenac Tabletten: 18 -> 17 tablets (packets: 6 -> 5, individual: 2)
[2026-02-28T17:49:01.233Z] === SENDING RESPONSE ===
[2026-02-28T17:49:01.234Z] âœ… Aceclofenac Tabletten (1 tablets)
ðŸ“ General tablets or capsules taken by mouth to treat specific symptoms and improve health.
ðŸ’Š Price per tablet: â‚¹16.67
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹16.67

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T17:49:01.234Z] === END RESPONSE ===
[2026-02-28T19:02:34.526Z] === NEW REQUEST ===
[2026-02-28T19:02:34.530Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:02:34.532Z] Message: "combiflam tablet"
[2026-02-28T19:02:34.538Z] Persisted session: undefined
[2026-02-28T19:02:34.540Z] Starting new session
[2026-02-28T19:02:34.542Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:02:34.555Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:02:34.558Z] Stage: initial
[2026-02-28T19:02:34.567Z] Pending medicine: null
[2026-02-28T19:02:34.570Z] Message: "combiflam tablet"
[2026-02-28T19:02:34.572Z] Is digits: false
[2026-02-28T19:02:34.575Z] Condition match: false
[2026-02-28T19:02:34.581Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T19:02:34.588Z] Message: "combiflam tablet"
[2026-02-28T19:02:34.590Z] Stage: initial
[2026-02-28T19:02:34.593Z] Pending medicine: null
[2026-02-28T19:02:35.405Z] Grok result: {"medicines":[{"name":"combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T19:02:35.410Z] === ORDER INTENT DETECTED ===
[2026-02-28T19:02:35.423Z] Processing medicine: combiflam tablet, quantity: null
[2026-02-28T19:02:49.392Z] === NEW REQUEST ===
[2026-02-28T19:02:49.395Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:02:49.404Z] Message: " 55"
[2026-02-28T19:02:49.406Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:02:49.410Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T19:02:49.415Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T19:02:49.418Z] Entering EARLY quantity branch with qty='55' for pending='{"id":2591,"name":"Combiflam Tablets"}'
[2026-02-28T19:02:49.544Z] DB match for pending: Combiflam Tablets
[2026-02-28T19:02:49.549Z] Real-time stock update for Combiflam Tablets: 816 -> 761 tablets (packets: 40 -> 38, individual: 1)
[2026-02-28T19:02:49.963Z] EARLY ADDâœ… Combiflam Tablets x55 | Cart: â‚¹17325.00
[2026-02-28T19:03:19.372Z] === NEW REQUEST ===
[2026-02-28T19:03:19.374Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:03:19.377Z] Message: "N"
[2026-02-28T19:03:19.383Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":55,"price_per_tablet":"315.00","total_price":17325}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:03:19.386Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T19:03:19.387Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:03:19.396Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:03:19.399Z] Stage: initial
[2026-02-28T19:03:19.413Z] Pending medicine: null
[2026-02-28T19:03:19.416Z] Message: "N"
[2026-02-28T19:03:19.419Z] Is digits: false
[2026-02-28T19:03:19.422Z] Condition match: false
[2026-02-28T19:03:19.427Z] User cancelled current cart (N) before checkout
[2026-02-28T19:33:16.432Z] === NEW REQUEST ===
[2026-02-28T19:33:16.439Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:33:16.442Z] Message: "Paracetamol 500mg"
[2026-02-28T19:33:16.445Z] Persisted session: undefined
[2026-02-28T19:33:16.447Z] Starting new session
[2026-02-28T19:33:16.459Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:33:16.461Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:33:16.470Z] Stage: initial
[2026-02-28T19:33:16.471Z] Pending medicine: null
[2026-02-28T19:33:16.474Z] Message: "Paracetamol 500mg"
[2026-02-28T19:33:16.484Z] Is digits: false
[2026-02-28T19:33:16.486Z] Condition match: false
[2026-02-28T19:33:16.489Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T19:33:16.492Z] Message: "Paracetamol 500mg"
[2026-02-28T19:33:16.495Z] Stage: initial
[2026-02-28T19:33:16.502Z] Pending medicine: null
[2026-02-28T19:33:17.333Z] Grok result: {"medicines":[{"name":"Paracetamol 500mg","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T19:33:17.334Z] === ORDER INTENT DETECTED ===
[2026-02-28T19:33:17.335Z] Processing medicine: Paracetamol 500mg, quantity: null
[2026-02-28T19:33:33.110Z] === NEW REQUEST ===
[2026-02-28T19:33:33.113Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:33:33.122Z] Message: " can you please order the combiflam tablet"
[2026-02-28T19:33:33.137Z] Persisted session: undefined
[2026-02-28T19:33:33.153Z] Starting new session
[2026-02-28T19:33:33.169Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:33:33.176Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:33:33.182Z] Stage: initial
[2026-02-28T19:33:33.188Z] Pending medicine: null
[2026-02-28T19:33:33.191Z] Message: " can you please order the combiflam tablet"
[2026-02-28T19:33:33.194Z] Is digits: false
[2026-02-28T19:33:33.197Z] Condition match: false
[2026-02-28T19:33:33.202Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T19:33:33.203Z] Message: " can you please order the combiflam tablet"
[2026-02-28T19:33:33.212Z] Stage: initial
[2026-02-28T19:33:33.217Z] Pending medicine: null
[2026-02-28T19:33:33.768Z] Grok result: {"medicines":[{"name":"can you please order the combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T19:33:33.780Z] === ORDER INTENT DETECTED ===
[2026-02-28T19:33:33.805Z] Processing medicine: can you please order the combiflam tablet, quantity: null
[2026-02-28T19:33:47.399Z] === NEW REQUEST ===
[2026-02-28T19:33:47.403Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:33:47.404Z] Message: " combiflam tablet please order"
[2026-02-28T19:33:47.405Z] Persisted session: undefined
[2026-02-28T19:33:47.412Z] Starting new session
[2026-02-28T19:33:47.416Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:33:47.418Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:33:47.429Z] Stage: initial
[2026-02-28T19:33:47.442Z] Pending medicine: null
[2026-02-28T19:33:47.445Z] Message: " combiflam tablet please order"
[2026-02-28T19:33:47.456Z] Is digits: false
[2026-02-28T19:33:47.459Z] Condition match: false
[2026-02-28T19:33:47.464Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T19:33:47.465Z] Message: " combiflam tablet please order"
[2026-02-28T19:33:47.466Z] Stage: initial
[2026-02-28T19:33:47.467Z] Pending medicine: null
[2026-02-28T19:33:47.913Z] Grok result: {"medicines":[{"name":"combiflam tablet please order","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T19:33:47.916Z] === ORDER INTENT DETECTED ===
[2026-02-28T19:33:47.920Z] Processing medicine: combiflam tablet please order, quantity: null
[2026-02-28T19:34:04.605Z] === NEW REQUEST ===
[2026-02-28T19:34:04.607Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:34:04.610Z] Message: " do you have combiflam tablet"
[2026-02-28T19:34:04.612Z] Persisted session: undefined
[2026-02-28T19:34:04.612Z] Starting new session
[2026-02-28T19:34:04.624Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:34:04.630Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:34:04.645Z] Stage: initial
[2026-02-28T19:34:04.652Z] Pending medicine: null
[2026-02-28T19:34:04.657Z] Message: " do you have combiflam tablet"
[2026-02-28T19:34:04.661Z] Is digits: false
[2026-02-28T19:34:04.665Z] Condition match: false
[2026-02-28T19:34:04.669Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T19:34:04.674Z] Message: " do you have combiflam tablet"
[2026-02-28T19:34:04.682Z] Stage: initial
[2026-02-28T19:34:04.689Z] Pending medicine: null
[2026-02-28T19:34:05.189Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"check_stock","action":"check_stock","language":"en"}
[2026-02-28T19:34:05.197Z] Setting pending medicine to: {"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T19:34:12.324Z] === NEW REQUEST ===
[2026-02-28T19:34:12.327Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:34:12.336Z] Message: " 3"
[2026-02-28T19:34:12.339Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:34:12.343Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-02-28T19:34:12.353Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-02-28T19:34:12.371Z] Entering EARLY quantity branch with qty='3' for pending='{"id":2591,"name":"Combiflam Tablets"}'
[2026-02-28T19:34:12.384Z] DB match for pending: Combiflam Tablets
[2026-02-28T19:34:12.395Z] Real-time stock update for Combiflam Tablets: 761 -> 758 tablets (packets: 38 -> 37, individual: 18)
[2026-02-28T19:34:12.443Z] EARLY ADDâœ… Combiflam Tablets x3 | Cart: â‚¹945.00
[2026-02-28T19:34:39.301Z] === NEW REQUEST ===
[2026-02-28T19:34:39.304Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:34:39.306Z] Message: "y"
[2026-02-28T19:34:39.314Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":3,"price_per_tablet":"315.00","total_price":945}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:34:39.317Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T19:34:39.319Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:34:39.332Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:34:39.346Z] Stage: initial
[2026-02-28T19:34:39.354Z] Pending medicine: null
[2026-02-28T19:34:39.359Z] Message: "y"
[2026-02-28T19:34:39.368Z] Is digits: false
[2026-02-28T19:34:39.375Z] Condition match: false
[2026-02-28T19:34:39.378Z] User chose to proceed directly with current cart (Y)
[2026-02-28T19:34:52.452Z] === NEW REQUEST ===
[2026-02-28T19:34:52.458Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:34:52.462Z] Message: "y"
[2026-02-28T19:34:52.466Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":3,"price_per_tablet":"315.00","total_price":945}],"stage":"confirm_order","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:34:52.486Z] Loaded existing session - Stage: confirm_order, Pending: null
[2026-02-28T19:34:52.509Z] Top-of-handler state: stage=confirm_order, pending=null
[2026-02-28T19:34:52.511Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:34:52.512Z] Stage: confirm_order
[2026-02-28T19:34:52.517Z] Pending medicine: null
[2026-02-28T19:34:52.519Z] Message: "y"
[2026-02-28T19:34:52.522Z] Is digits: false
[2026-02-28T19:34:52.530Z] Condition match: false
[2026-02-28T19:35:08.175Z] === NEW REQUEST ===
[2026-02-28T19:35:08.176Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:35:08.176Z] Message: "sumit chatur 22 1234567890"
[2026-02-28T19:35:08.177Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":3,"price_per_tablet":"315.00","total_price":945}],"stage":"ask_customer","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:35:08.178Z] Loaded existing session - Stage: ask_customer, Pending: null
[2026-02-28T19:35:08.179Z] Top-of-handler state: stage=ask_customer, pending=null
[2026-02-28T19:35:08.179Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:35:08.181Z] Stage: ask_customer
[2026-02-28T19:35:08.182Z] Pending medicine: null
[2026-02-28T19:35:08.183Z] Message: "sumit chatur 22 1234567890"
[2026-02-28T19:35:08.184Z] Is digits: false
[2026-02-28T19:35:08.185Z] Condition match: false
[2026-02-28T19:35:16.117Z] === NEW REQUEST ===
[2026-02-28T19:35:16.118Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:35:16.120Z] Message: "proceed"
[2026-02-28T19:35:16.121Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":3,"price_per_tablet":"315.00","total_price":945}],"stage":"ready","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":"sumit chatur","age":22,"mobile":"1234567890"},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:35:16.123Z] Loaded existing session - Stage: ready, Pending: null
[2026-02-28T19:35:16.124Z] Top-of-handler state: stage=ready, pending=null
[2026-02-28T19:35:16.124Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:35:16.125Z] Stage: ready
[2026-02-28T19:35:16.127Z] Pending medicine: null
[2026-02-28T19:35:16.128Z] Message: "proceed"
[2026-02-28T19:35:16.129Z] Is digits: false
[2026-02-28T19:35:16.130Z] Condition match: false
[2026-02-28T19:35:23.288Z] === NEW REQUEST ===
[2026-02-28T19:35:23.290Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:35:23.291Z] Message: "y"
[2026-02-28T19:35:23.292Z] Persisted session: {"sessionState":{"medicines":[{"id":2591,"name":"Combiflam Tablets","quantity":3,"price_per_tablet":"315.00","total_price":945}],"stage":"confirm_order","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":"sumit chatur","age":22,"mobile":"1234567890"},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T19:35:23.293Z] Loaded existing session - Stage: confirm_order, Pending: null
[2026-02-28T19:35:23.294Z] Top-of-handler state: stage=confirm_order, pending=null
[2026-02-28T19:35:23.298Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:35:23.303Z] Stage: confirm_order
[2026-02-28T19:35:23.304Z] Pending medicine: null
[2026-02-28T19:35:23.305Z] Message: "y"
[2026-02-28T19:35:23.309Z] Is digits: false
[2026-02-28T19:35:23.315Z] Condition match: false
[2026-02-28T19:35:23.408Z] Order confirmed: Combiflam Tablets (3 tablets) - stock already deducted in real-time
[2026-02-28T19:42:52.679Z] === NEW REQUEST ===
[2026-02-28T19:42:52.681Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T19:42:52.682Z] Message: "Paracetamol apodiscounter 500 mg Tabletten -2"
[2026-02-28T19:42:52.684Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null}},"expiresAt":1772389800000}
[2026-02-28T19:42:52.686Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T19:42:52.687Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T19:42:52.689Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T19:42:52.690Z] Stage: initial
[2026-02-28T19:42:52.692Z] Pending medicine: null
[2026-02-28T19:42:52.696Z] Message: "Paracetamol apodiscounter 500 mg Tabletten -2"
[2026-02-28T19:42:52.701Z] Is digits: false
[2026-02-28T19:42:52.703Z] Condition match: false
[2026-02-28T19:42:52.706Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T19:42:52.708Z] Message: "Paracetamol apodiscounter 500 mg Tabletten -2"
[2026-02-28T19:42:52.710Z] Stage: initial
[2026-02-28T19:42:52.710Z] Pending medicine: null
[2026-02-28T19:42:53.356Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2}],"intent":"order","action":"order","language":"en"}
[2026-02-28T19:42:53.356Z] === ORDER INTENT DETECTED ===
[2026-02-28T19:42:53.359Z] Processing medicine: Paracetamol apodiscounter 500 mg Tabletten, quantity: 2
[2026-02-28T19:42:53.365Z] Found medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-02-28T20:34:06.512Z] === NEW REQUEST ===
[2026-02-28T20:34:06.513Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:34:06.514Z] Message: "Hello"
[2026-02-28T20:34:06.515Z] Persisted session: undefined
[2026-02-28T20:34:06.516Z] Starting new session
[2026-02-28T20:34:06.517Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:34:06.518Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:34:06.519Z] Stage: initial
[2026-02-28T20:34:06.519Z] Pending medicine: null
[2026-02-28T20:34:06.520Z] Message: "Hello"
[2026-02-28T20:34:06.520Z] Is digits: false
[2026-02-28T20:34:06.521Z] Condition match: false
[2026-02-28T20:34:06.521Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:34:06.522Z] Message: "Hello"
[2026-02-28T20:34:06.523Z] Stage: initial
[2026-02-28T20:34:06.523Z] Pending medicine: null
[2026-02-28T20:34:07.306Z] Grok result: {"medicines":[{"name":"Hello","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T20:34:07.307Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:34:07.308Z] Processing medicine: Hello, quantity: null
[2026-02-28T20:37:52.055Z] === NEW REQUEST ===
[2026-02-28T20:37:52.056Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:37:52.058Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-02-28T20:37:52.059Z] Persisted session: undefined
[2026-02-28T20:37:52.060Z] Starting new session
[2026-02-28T20:37:52.061Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:37:52.062Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:37:52.063Z] Stage: initial
[2026-02-28T20:37:52.067Z] Pending medicine: null
[2026-02-28T20:37:52.071Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-02-28T20:37:52.073Z] Is digits: false
[2026-02-28T20:37:52.073Z] Condition match: false
[2026-02-28T20:37:52.075Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:37:52.076Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-02-28T20:37:52.078Z] Stage: initial
[2026-02-28T20:37:52.078Z] Pending medicine: null
[2026-02-28T20:37:52.623Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2}],"intent":"order","action":"order","language":"en"}
[2026-02-28T20:37:52.624Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:37:52.624Z] Processing medicine: Paracetamol apodiscounter 500 mg Tabletten, quantity: 2
[2026-02-28T20:37:52.626Z] Found medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-02-28T20:38:41.094Z] === NEW REQUEST ===
[2026-02-28T20:38:41.096Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:38:41.103Z] Message: "I want combiflam tablet"
[2026-02-28T20:38:41.104Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T20:38:41.104Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T20:38:41.105Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:38:41.107Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:38:41.116Z] Stage: initial
[2026-02-28T20:38:41.117Z] Pending medicine: null
[2026-02-28T20:38:41.118Z] Message: "I want combiflam tablet"
[2026-02-28T20:38:41.118Z] Is digits: false
[2026-02-28T20:38:41.119Z] Condition match: false
[2026-02-28T20:38:41.121Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:38:41.124Z] Message: "I want combiflam tablet"
[2026-02-28T20:38:41.127Z] Stage: initial
[2026-02-28T20:38:41.129Z] Pending medicine: null
[2026-02-28T20:38:41.790Z] Grok result: {"medicines":[{"name":"I want combiflam tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T20:38:41.794Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:38:41.796Z] Processing medicine: I want combiflam tablet, quantity: null
[2026-02-28T20:39:44.396Z] === NEW REQUEST ===
[2026-02-28T20:39:44.401Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:39:44.407Z] Message: "1 combiflam tablet"
[2026-02-28T20:39:44.408Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T20:39:44.409Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T20:39:44.410Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:39:44.416Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:39:44.420Z] Stage: initial
[2026-02-28T20:39:44.421Z] Pending medicine: null
[2026-02-28T20:39:44.422Z] Message: "1 combiflam tablet"
[2026-02-28T20:39:44.423Z] Is digits: false
[2026-02-28T20:39:44.426Z] Condition match: false
[2026-02-28T20:39:44.429Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:39:44.433Z] Message: "1 combiflam tablet"
[2026-02-28T20:39:44.434Z] Stage: initial
[2026-02-28T20:39:44.435Z] Pending medicine: null
[2026-02-28T20:39:45.069Z] Grok result: {"medicines":[{"name":"combiflam","quantity":1}],"intent":"order","action":"order","language":"en"}
[2026-02-28T20:39:45.069Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:39:45.070Z] Processing medicine: combiflam, quantity: 1
[2026-02-28T20:39:45.073Z] Found medicine: Combiflam Tablets
[2026-02-28T20:39:45.074Z] Real-time stock update for Combiflam Tablets: 758 -> 757 tablets (packets: 37 -> 37, individual: 17)
[2026-02-28T20:39:45.257Z] === SENDING RESPONSE ===
[2026-02-28T20:39:45.258Z] âœ… Combiflam Tablets (1 tablets)
ðŸ“ Everyday medicine used to treat common health issues and help you feel better quickly.
ðŸ’Š Price per tablet: â‚¹315.00
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹315.00

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T20:39:45.259Z] === END RESPONSE ===
[2026-02-28T20:53:46.198Z] === NEW REQUEST ===
[2026-02-28T20:53:46.200Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:53:46.202Z] Message: "Heparin Injection -1"
[2026-02-28T20:53:46.204Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T20:53:46.206Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T20:53:46.207Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:53:46.212Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:53:46.213Z] Stage: initial
[2026-02-28T20:53:46.215Z] Pending medicine: null
[2026-02-28T20:53:46.216Z] Message: "Heparin Injection -1"
[2026-02-28T20:53:46.218Z] Is digits: false
[2026-02-28T20:53:46.219Z] Condition match: false
[2026-02-28T20:53:46.220Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:53:46.222Z] Message: "Heparin Injection -1"
[2026-02-28T20:53:46.227Z] Stage: initial
[2026-02-28T20:53:46.228Z] Pending medicine: null
[2026-02-28T20:53:46.933Z] Grok result: {"medicines":[{"name":"Heparin Injection","quantity":1}],"intent":"order","action":"check_stock","language":"en"}
[2026-02-28T20:53:46.935Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:53:46.937Z] Processing medicine: Heparin Injection, quantity: 1
[2026-02-28T20:53:46.941Z] Found medicine: Heparin Injection
[2026-02-28T20:53:46.944Z] Real-time stock update for Heparin Injection: 900 -> 899 tablets (packets: 30 -> 29, individual: 29)
[2026-02-28T20:53:46.964Z] === SENDING RESPONSE ===
[2026-02-28T20:53:46.966Z] âœ… Heparin Injection (1 tablets)
ðŸ“ Direct medical treatment given via injection. Usually for faster action or specific hospital-grade care.
ðŸ’Š Price per tablet: â‚¹2.67
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹2.67

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T20:53:46.968Z] === END RESPONSE ===
[2026-02-28T20:54:06.358Z] === NEW REQUEST ===
[2026-02-28T20:54:06.359Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:54:06.360Z] Message: "Heparin Injection-1"
[2026-02-28T20:54:06.362Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T20:54:06.365Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T20:54:06.366Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:54:06.368Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:54:06.369Z] Stage: initial
[2026-02-28T20:54:06.371Z] Pending medicine: null
[2026-02-28T20:54:06.372Z] Message: "Heparin Injection-1"
[2026-02-28T20:54:06.373Z] Is digits: false
[2026-02-28T20:54:06.374Z] Condition match: false
[2026-02-28T20:54:06.375Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:54:06.376Z] Message: "Heparin Injection-1"
[2026-02-28T20:54:06.377Z] Stage: initial
[2026-02-28T20:54:06.378Z] Pending medicine: null
[2026-02-28T20:54:07.049Z] Grok result: {"medicines":[{"name":"Heparin Injection","quantity":1}],"intent":"order","action":"check_stock","language":"en"}
[2026-02-28T20:54:07.049Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:54:07.050Z] Processing medicine: Heparin Injection, quantity: 1
[2026-02-28T20:54:07.052Z] Found medicine: Heparin Injection
[2026-02-28T20:54:07.053Z] Real-time stock update for Heparin Injection: 899 -> 898 tablets (packets: 29 -> 29, individual: 28)
[2026-02-28T20:54:07.056Z] === SENDING RESPONSE ===
[2026-02-28T20:54:07.057Z] âœ… Heparin Injection (1 tablets)
ðŸ“ Direct medical treatment given via injection. Usually for faster action or specific hospital-grade care.
ðŸ’Š Price per tablet: â‚¹2.67
ðŸ“¦ Quantity: 1
ðŸ’° Total price: â‚¹2.67

ðŸŽ‰ Order Placed Successfully!
[2026-02-28T20:54:07.058Z] === END RESPONSE ===
[2026-02-28T20:55:31.547Z] === NEW REQUEST ===
[2026-02-28T20:55:31.548Z] Session key: DEBUG_SESSION_KEY
[2026-02-28T20:55:31.550Z] Message: "Combiflam Tablets"
[2026-02-28T20:55:31.551Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-02-28T20:55:31.552Z] Loaded existing session - Stage: initial, Pending: null
[2026-02-28T20:55:31.553Z] Top-of-handler state: stage=initial, pending=null
[2026-02-28T20:55:31.553Z] === CHECKING QUANTITY RESPONSE ===
[2026-02-28T20:55:31.554Z] Stage: initial
[2026-02-28T20:55:31.554Z] Pending medicine: null
[2026-02-28T20:55:31.555Z] Message: "Combiflam Tablets"
[2026-02-28T20:55:31.555Z] Is digits: false
[2026-02-28T20:55:31.556Z] Condition match: false
[2026-02-28T20:55:31.557Z] === GROK AI MESSAGE PROCESSING ===
[2026-02-28T20:55:31.557Z] Message: "Combiflam Tablets"
[2026-02-28T20:55:31.557Z] Stage: initial
[2026-02-28T20:55:31.558Z] Pending medicine: null
[2026-02-28T20:55:32.140Z] Grok result: {"medicines":[{"name":"Combiflam Tablets","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-02-28T20:55:32.141Z] === ORDER INTENT DETECTED ===
[2026-02-28T20:55:32.142Z] Processing medicine: Combiflam Tablets, quantity: null
[2026-03-01T01:47:47.438Z] === NEW REQUEST ===
[2026-03-01T01:47:47.447Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:47:47.452Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-1"
[2026-03-01T01:47:47.455Z] Persisted session: undefined
[2026-03-01T01:47:47.456Z] Starting new session
[2026-03-01T01:47:47.457Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T01:47:47.459Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:47:47.461Z] Stage: initial
[2026-03-01T01:47:47.462Z] Pending medicine: null
[2026-03-01T01:47:47.464Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-1"
[2026-03-01T01:47:47.465Z] Is digits: false
[2026-03-01T01:47:47.466Z] Condition match: false
[2026-03-01T01:47:47.467Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:47:47.469Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-1"
[2026-03-01T01:47:47.470Z] Stage: initial
[2026-03-01T01:47:47.472Z] Pending medicine: null
[2026-03-01T01:47:48.006Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1}],"intent":"order","action":"order","language":"en"}
[2026-03-01T01:47:48.007Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:47:48.008Z] Processing medicine: Paracetamol apodiscounter 500 mg Tabletten, quantity: 1
[2026-03-01T01:47:48.008Z] Detected language: en for medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-03-01T01:47:48.011Z] Enhanced medicine name: "Paracetamol apodiscounter 500 mg Tabletten" â†’ "Paracetamol apodiscounter 500 mg Tabletten"
[2026-03-01T01:47:48.014Z] Found medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-03-01T01:54:45.320Z] === NEW REQUEST ===
[2026-03-01T01:54:45.321Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:54:45.321Z] Message: "??? ??????????? ??????"
[2026-03-01T01:54:45.324Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:54:45.325Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T01:54:45.326Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T01:54:45.327Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:54:45.327Z] Stage: initial
[2026-03-01T01:54:45.328Z] Pending medicine: null
[2026-03-01T01:54:45.328Z] Message: "??? ??????????? ??????"
[2026-03-01T01:54:45.329Z] Is digits: false
[2026-03-01T01:54:45.329Z] Condition match: false
[2026-03-01T01:54:45.330Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:54:45.331Z] Message: "??? ??????????? ??????"
[2026-03-01T01:54:45.332Z] Stage: initial
[2026-03-01T01:54:45.332Z] Pending medicine: null
[2026-03-01T01:54:45.686Z] Grok result: {"medicines":[{"name":"??? ??????????? ??????","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T01:54:45.687Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:54:45.687Z] Processing medicine: ??? ??????????? ??????, quantity: null
[2026-03-01T01:54:45.688Z] Detected language: en for medicine: ??? ??????????? ??????
[2026-03-01T01:54:45.688Z] Enhanced medicine name: "??? ??????????? ??????" â†’ "??? ??????????? ??????"
[2026-03-01T01:55:25.269Z] === NEW REQUEST ===
[2026-03-01T01:55:25.269Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:55:25.270Z] Message: "??? ??????????? ??????"
[2026-03-01T01:55:25.271Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:55:25.271Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T01:55:25.272Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T01:55:25.273Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:55:25.273Z] Stage: initial
[2026-03-01T01:55:25.274Z] Pending medicine: null
[2026-03-01T01:55:25.275Z] Message: "??? ??????????? ??????"
[2026-03-01T01:55:25.275Z] Is digits: false
[2026-03-01T01:55:25.276Z] Condition match: false
[2026-03-01T01:55:25.277Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:55:25.277Z] Message: "??? ??????????? ??????"
[2026-03-01T01:55:25.278Z] Stage: initial
[2026-03-01T01:55:25.279Z] Pending medicine: null
[2026-03-01T01:55:25.634Z] Grok result: {"medicines":[{"name":"??? ??????????? ??????","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T01:55:25.635Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:55:25.636Z] Processing medicine: ??? ??????????? ??????, quantity: null
[2026-03-01T01:55:25.636Z] Detected language: en for medicine: ??? ??????????? ??????
[2026-03-01T01:55:25.637Z] Enhanced medicine name: "??? ??????????? ??????" â†’ "??? ??????????? ??????"
[2026-03-01T01:55:36.691Z] === NEW REQUEST ===
[2026-03-01T01:55:36.691Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:55:36.692Z] Message: "I want paracetamol"
[2026-03-01T01:55:36.692Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:55:36.693Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T01:55:36.694Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T01:55:36.694Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:55:36.695Z] Stage: initial
[2026-03-01T01:55:36.695Z] Pending medicine: null
[2026-03-01T01:55:36.698Z] Message: "I want paracetamol"
[2026-03-01T01:55:36.699Z] Is digits: false
[2026-03-01T01:55:36.700Z] Condition match: false
[2026-03-01T01:55:36.701Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:55:36.702Z] Message: "I want paracetamol"
[2026-03-01T01:55:36.702Z] Stage: initial
[2026-03-01T01:55:36.703Z] Pending medicine: null
[2026-03-01T01:55:37.069Z] Grok result: {"medicines":[{"name":"I want paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T01:55:37.069Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:55:37.070Z] Processing medicine: I want paracetamol, quantity: null
[2026-03-01T01:55:37.071Z] Detected language: en for medicine: I want paracetamol
[2026-03-01T01:55:37.072Z] Enhanced medicine name: "I want paracetamol" â†’ "I want paracetamol"
[2026-03-01T01:56:01.155Z] === NEW REQUEST ===
[2026-03-01T01:56:01.158Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:56:01.160Z] Message: "paracetamol"
[2026-03-01T01:56:01.162Z] Persisted session: {"sessionState":{"medicines":[],"stage":"initial","pendingMedicine":null,"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:56:01.163Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T01:56:01.164Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T01:56:01.164Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:56:01.165Z] Stage: initial
[2026-03-01T01:56:01.166Z] Pending medicine: null
[2026-03-01T01:56:01.166Z] Message: "paracetamol"
[2026-03-01T01:56:01.167Z] Is digits: false
[2026-03-01T01:56:01.168Z] Condition match: false
[2026-03-01T01:56:01.168Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:56:01.169Z] Message: "paracetamol"
[2026-03-01T01:56:01.169Z] Stage: initial
[2026-03-01T01:56:01.170Z] Pending medicine: null
[2026-03-01T01:56:01.530Z] Grok result: {"medicines":[{"name":"paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T01:56:01.531Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:56:01.532Z] Processing medicine: paracetamol, quantity: null
[2026-03-01T01:56:01.532Z] Detected language: en for medicine: paracetamol
[2026-03-01T01:56:01.533Z] Enhanced medicine name: "paracetamol" â†’ "paracetamol"
[2026-03-01T01:56:11.908Z] === NEW REQUEST ===
[2026-03-01T01:56:11.909Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:56:11.909Z] Message: "???????????"
[2026-03-01T01:56:11.910Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:56:11.911Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T01:56:11.912Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:56:11.913Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:56:11.914Z] Stage: ask_quantity
[2026-03-01T01:56:11.914Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:56:11.915Z] Message: "???????????"
[2026-03-01T01:56:11.916Z] Is digits: false
[2026-03-01T01:56:11.916Z] Condition match: false
[2026-03-01T01:56:11.917Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:56:11.917Z] Message: "???????????"
[2026-03-01T01:56:11.918Z] Stage: ask_quantity
[2026-03-01T01:56:11.918Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:56:12.303Z] Grok result: {"medicines":[{"name":"???????????","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T01:56:12.304Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:56:12.305Z] Processing medicine: ???????????, quantity: null
[2026-03-01T01:56:12.305Z] Detected language: en for medicine: ???????????
[2026-03-01T01:56:12.306Z] Enhanced medicine name: "???????????" â†’ "???????????"
[2026-03-01T01:57:30.893Z] === NEW REQUEST ===
[2026-03-01T01:57:30.898Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:57:30.901Z] Message: "Mala Paracetamol paije"
[2026-03-01T01:57:30.903Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:57:30.909Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T01:57:30.910Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:57:30.911Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:57:30.912Z] Stage: ask_quantity
[2026-03-01T01:57:30.914Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:57:30.917Z] Message: "Mala Paracetamol paije"
[2026-03-01T01:57:30.919Z] Is digits: false
[2026-03-01T01:57:30.922Z] Condition match: false
[2026-03-01T01:57:30.926Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:57:30.928Z] Message: "Mala Paracetamol paije"
[2026-03-01T01:57:30.930Z] Stage: ask_quantity
[2026-03-01T01:57:30.932Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:57:31.285Z] Grok result: {"medicines":[{"name":"Paracetamol","quantity":null}],"intent":"order","action":"check_stock","language":"mr"}
[2026-03-01T01:57:31.299Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:57:31.311Z] Processing medicine: Paracetamol, quantity: null
[2026-03-01T01:57:31.315Z] Detected language: mr for medicine: Paracetamol
[2026-03-01T01:57:31.330Z] Enhanced medicine name: "Paracetamol" â†’ "Paracetamol"
[2026-03-01T01:58:28.327Z] === NEW REQUEST ===
[2026-03-01T01:58:28.329Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T01:58:28.337Z] Message: "Mala Paracetamol pigeon"
[2026-03-01T01:58:28.347Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":1,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T01:58:28.351Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T01:58:28.354Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:58:28.357Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T01:58:28.358Z] Stage: ask_quantity
[2026-03-01T01:58:28.360Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:58:28.362Z] Message: "Mala Paracetamol pigeon"
[2026-03-01T01:58:28.363Z] Is digits: false
[2026-03-01T01:58:28.365Z] Condition match: false
[2026-03-01T01:58:28.366Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T01:58:28.367Z] Message: "Mala Paracetamol pigeon"
[2026-03-01T01:58:28.368Z] Stage: ask_quantity
[2026-03-01T01:58:28.370Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T01:58:28.702Z] Grok result: {"medicines":[{"name":"Paracetamol","quantity":null}],"intent":"order","action":"check_stock","language":"mr"}
[2026-03-01T01:58:28.706Z] === ORDER INTENT DETECTED ===
[2026-03-01T01:58:28.708Z] Processing medicine: Paracetamol, quantity: null
[2026-03-01T01:58:28.709Z] Detected language: mr for medicine: Paracetamol
[2026-03-01T01:58:28.710Z] Enhanced medicine name: "Paracetamol" â†’ "Paracetamol"
[2026-03-01T02:01:30.206Z] === NEW REQUEST ===
[2026-03-01T02:01:30.207Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:01:30.210Z] Message: "Mala Paracetamol pigeon"
[2026-03-01T02:01:30.212Z] Persisted session: undefined
[2026-03-01T02:01:30.214Z] Starting new session
[2026-03-01T02:01:30.216Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T02:01:30.219Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:01:30.221Z] Stage: initial
[2026-03-01T02:01:30.222Z] Pending medicine: null
[2026-03-01T02:01:30.222Z] Message: "Mala Paracetamol pigeon"
[2026-03-01T02:01:30.223Z] Is digits: false
[2026-03-01T02:01:30.224Z] Condition match: false
[2026-03-01T02:01:30.228Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:01:30.231Z] Message: "Mala Paracetamol pigeon"
[2026-03-01T02:01:30.233Z] Stage: initial
[2026-03-01T02:01:30.236Z] Pending medicine: null
[2026-03-01T02:01:30.712Z] Grok result: {"medicines":[{"name":"Paracetamol","quantity":null}],"intent":"order","action":"check_stock","language":"mr"}
[2026-03-01T02:01:30.713Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:01:30.715Z] Processing medicine: Paracetamol, quantity: null
[2026-03-01T02:01:30.717Z] Detected language: mr for medicine: Paracetamol
[2026-03-01T02:01:30.720Z] Enhanced medicine name: "Paracetamol" â†’ "Paracetamol"
[2026-03-01T02:02:24.185Z] === NEW REQUEST ===
[2026-03-01T02:02:24.186Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:02:24.188Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-03-01T02:02:24.190Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T02:02:24.193Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T02:02:24.195Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T02:02:24.197Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:02:24.199Z] Stage: ask_quantity
[2026-03-01T02:02:24.202Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T02:02:24.204Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-03-01T02:02:24.208Z] Is digits: false
[2026-03-01T02:02:24.210Z] Condition match: false
[2026-03-01T02:02:24.212Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:02:24.214Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-03-01T02:02:24.215Z] Stage: ask_quantity
[2026-03-01T02:02:24.218Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T02:02:24.587Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2}],"intent":"order","action":"order","language":"en"}
[2026-03-01T02:02:24.588Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:02:24.591Z] Processing medicine: Paracetamol apodiscounter 500 mg Tabletten, quantity: 2
[2026-03-01T02:02:24.593Z] Detected language: en for medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-03-01T02:02:24.597Z] Enhanced medicine name: "Paracetamol apodiscounter 500 mg Tabletten" â†’ "Paracetamol apodiscounter 500 mg Tabletten"
[2026-03-01T02:02:24.605Z] Found medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-03-01T02:03:33.631Z] === NEW REQUEST ===
[2026-03-01T02:03:33.632Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:03:33.633Z] Message: "Betadine Ointment"
[2026-03-01T02:03:33.633Z] Persisted session: undefined
[2026-03-01T02:03:33.635Z] Starting new session
[2026-03-01T02:03:33.638Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T02:03:33.641Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:03:33.643Z] Stage: initial
[2026-03-01T02:03:33.645Z] Pending medicine: null
[2026-03-01T02:03:33.647Z] Message: "Betadine Ointment"
[2026-03-01T02:03:33.648Z] Is digits: false
[2026-03-01T02:03:33.649Z] Condition match: false
[2026-03-01T02:03:33.649Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:03:33.650Z] Message: "Betadine Ointment"
[2026-03-01T02:03:33.651Z] Stage: initial
[2026-03-01T02:03:33.652Z] Pending medicine: null
[2026-03-01T02:03:34.126Z] Grok result: {"medicines":[{"name":"Betadine Ointment","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T02:03:34.128Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:03:34.129Z] Processing medicine: Betadine Ointment, quantity: null
[2026-03-01T02:03:34.130Z] Detected language: en for medicine: Betadine Ointment
[2026-03-01T02:03:34.134Z] Enhanced medicine name: "Betadine Ointment" â†’ "Betadine Ointment"
[2026-03-01T02:09:09.285Z] === NEW REQUEST ===
[2026-03-01T02:09:09.295Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:09:09.298Z] Message: "Mala Paracetamol paije"
[2026-03-01T02:09:09.302Z] Persisted session: undefined
[2026-03-01T02:09:09.315Z] Starting new session
[2026-03-01T02:09:09.317Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T02:09:09.325Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:09:09.328Z] Stage: initial
[2026-03-01T02:09:09.330Z] Pending medicine: null
[2026-03-01T02:09:09.332Z] Message: "Mala Paracetamol paije"
[2026-03-01T02:09:09.334Z] Is digits: false
[2026-03-01T02:09:09.335Z] Condition match: false
[2026-03-01T02:09:09.341Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:09:09.342Z] Message: "Mala Paracetamol paije"
[2026-03-01T02:09:09.345Z] Stage: initial
[2026-03-01T02:09:09.347Z] Pending medicine: null
[2026-03-01T02:09:09.775Z] Grok result: {"medicines":[{"name":"Paracetamol","quantity":null}],"intent":"order","action":"check_stock","language":"mr"}
[2026-03-01T02:09:09.777Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:09:09.780Z] Processing medicine: Paracetamol, quantity: null
[2026-03-01T02:09:09.782Z] Detected language: mr for medicine: Paracetamol
[2026-03-01T02:09:09.788Z] Enhanced medicine name: "Paracetamol" â†’ "Paracetamol"
[2026-03-01T02:45:17.274Z] === NEW REQUEST ===
[2026-03-01T02:45:17.278Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:45:17.280Z] Message: "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:17.282Z] Persisted session: undefined
[2026-03-01T02:45:17.286Z] Starting new session
[2026-03-01T02:45:17.289Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T02:45:17.294Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:45:17.296Z] Stage: initial
[2026-03-01T02:45:17.299Z] Pending medicine: null
[2026-03-01T02:45:17.302Z] Message: "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:17.304Z] Is digits: false
[2026-03-01T02:45:17.305Z] Condition match: false
[2026-03-01T02:45:17.310Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:45:17.313Z] Message: "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:17.315Z] Stage: initial
[2026-03-01T02:45:17.318Z] Pending medicine: null
[2026-03-01T02:45:17.781Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T02:45:17.783Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:45:17.785Z] Processing medicine: Paracetamol apodiscounter 650 mg Tabletten, quantity: null
[2026-03-01T02:45:17.788Z] Detected language: en for medicine: Paracetamol apodiscounter 650 mg Tabletten
[2026-03-01T02:45:17.791Z] Enhanced medicine name: "Paracetamol apodiscounter 650 mg Tabletten" â†’ "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:42.693Z] === NEW REQUEST ===
[2026-03-01T02:45:42.695Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:45:42.698Z] Message: "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:42.737Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T02:45:42.739Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T02:45:42.740Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T02:45:42.744Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:45:42.747Z] Stage: ask_quantity
[2026-03-01T02:45:42.749Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T02:45:42.751Z] Message: "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:42.753Z] Is digits: false
[2026-03-01T02:45:42.755Z] Condition match: false
[2026-03-01T02:45:42.757Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:45:42.762Z] Message: "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:45:42.766Z] Stage: ask_quantity
[2026-03-01T02:45:42.768Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T02:45:43.096Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T02:45:43.098Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:45:43.099Z] Processing medicine: Paracetamol apodiscounter 650 mg Tabletten, quantity: null
[2026-03-01T02:45:43.100Z] Detected language: en for medicine: Paracetamol apodiscounter 650 mg Tabletten
[2026-03-01T02:45:43.102Z] Enhanced medicine name: "Paracetamol apodiscounter 650 mg Tabletten" â†’ "Paracetamol apodiscounter 650 mg Tabletten"
[2026-03-01T02:47:48.408Z] === NEW REQUEST ===
[2026-03-01T02:47:48.417Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T02:47:48.419Z] Message: "Mala Paracetamol paije"
[2026-03-01T02:47:48.422Z] Persisted session: undefined
[2026-03-01T02:47:48.425Z] Starting new session
[2026-03-01T02:47:48.431Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T02:47:48.436Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T02:47:48.439Z] Stage: initial
[2026-03-01T02:47:48.440Z] Pending medicine: null
[2026-03-01T02:47:48.446Z] Message: "Mala Paracetamol paije"
[2026-03-01T02:47:48.448Z] Is digits: false
[2026-03-01T02:47:48.451Z] Condition match: false
[2026-03-01T02:47:48.453Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T02:47:48.455Z] Message: "Mala Paracetamol paije"
[2026-03-01T02:47:48.456Z] Stage: initial
[2026-03-01T02:47:48.457Z] Pending medicine: null
[2026-03-01T02:47:48.904Z] Grok result: {"medicines":[{"name":"Mala Paracetamol paije","quantity":null}],"intent":"order","action":"order","language":"mr"}
[2026-03-01T02:47:48.905Z] === ORDER INTENT DETECTED ===
[2026-03-01T02:47:48.907Z] Processing medicine: Mala Paracetamol paije, quantity: null
[2026-03-01T02:47:48.909Z] Detected language: mr for medicine: Mala Paracetamol paije
[2026-03-01T02:47:48.938Z] Enhanced medicine name: "Mala Paracetamol paije" â†’ "Mala Paracetamol paije"
[2026-03-01T03:05:35.592Z] === NEW REQUEST ===
[2026-03-01T03:05:35.594Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:05:35.595Z] Message: "Heparin Injection"
[2026-03-01T03:05:35.597Z] Persisted session: undefined
[2026-03-01T03:05:35.601Z] Starting new session
[2026-03-01T03:05:35.606Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:05:35.607Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:05:35.607Z] Stage: initial
[2026-03-01T03:05:35.608Z] Pending medicine: null
[2026-03-01T03:05:35.609Z] Message: "Heparin Injection"
[2026-03-01T03:05:35.611Z] Is digits: false
[2026-03-01T03:05:35.616Z] Condition match: false
[2026-03-01T03:05:35.621Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:05:35.622Z] Message: "Heparin Injection"
[2026-03-01T03:05:35.622Z] Stage: initial
[2026-03-01T03:05:35.623Z] Pending medicine: null
[2026-03-01T03:05:36.189Z] Grok result: {"medicines":[{"name":"Heparin Injection","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:05:36.189Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:05:36.190Z] Processing medicine: Heparin Injection, quantity: null
[2026-03-01T03:05:36.191Z] Detected language: en for medicine: Heparin Injection
[2026-03-01T03:05:36.191Z] Enhanced medicine name: "Heparin Injection" â†’ "Heparin Injection"
[2026-03-01T03:05:56.838Z] === NEW REQUEST ===
[2026-03-01T03:05:56.841Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:05:56.844Z] Message: "Mala Paracetamol paije"
[2026-03-01T03:05:56.849Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2631,"name":"Heparin Injection"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:05:56.858Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:05:56.861Z] Top-of-handler state: stage=ask_quantity, pending={"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:05:56.862Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:05:56.863Z] Stage: ask_quantity
[2026-03-01T03:05:56.869Z] Pending medicine: {"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:05:56.874Z] Message: "Mala Paracetamol paije"
[2026-03-01T03:05:56.875Z] Is digits: false
[2026-03-01T03:05:56.876Z] Condition match: false
[2026-03-01T03:05:56.877Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:05:56.877Z] Message: "Mala Paracetamol paije"
[2026-03-01T03:05:56.882Z] Stage: ask_quantity
[2026-03-01T03:05:56.887Z] Pending medicine: {"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:05:57.195Z] Grok result: {"medicines":[{"name":"Mala Paracetamol paije","quantity":null}],"intent":"order","action":"order","language":"mr"}
[2026-03-01T03:05:57.195Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:05:57.196Z] Processing medicine: Mala Paracetamol paije, quantity: null
[2026-03-01T03:05:57.196Z] Detected language: mr for medicine: Mala Paracetamol paije
[2026-03-01T03:05:57.206Z] Enhanced medicine name: "Mala Paracetamol paije" â†’ "Mala Paracetamol paije"
[2026-03-01T03:06:12.579Z] === NEW REQUEST ===
[2026-03-01T03:06:12.579Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:06:12.582Z] Message: "I want paracetamol tablet"
[2026-03-01T03:06:12.593Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2631,"name":"Heparin Injection"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:06:12.605Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:06:12.608Z] Top-of-handler state: stage=ask_quantity, pending={"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:06:12.611Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:06:12.617Z] Stage: ask_quantity
[2026-03-01T03:06:12.619Z] Pending medicine: {"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:06:12.620Z] Message: "I want paracetamol tablet"
[2026-03-01T03:06:12.620Z] Is digits: false
[2026-03-01T03:06:12.621Z] Condition match: false
[2026-03-01T03:06:12.622Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:06:12.625Z] Message: "I want paracetamol tablet"
[2026-03-01T03:06:12.629Z] Stage: ask_quantity
[2026-03-01T03:06:12.635Z] Pending medicine: {"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:06:12.937Z] Grok result: {"medicines":[{"name":"I want paracetamol tablet","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:06:12.938Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:06:12.939Z] Processing medicine: I want paracetamol tablet, quantity: null
[2026-03-01T03:06:12.939Z] Detected language: en for medicine: I want paracetamol tablet
[2026-03-01T03:06:12.940Z] Enhanced medicine name: "I want paracetamol tablet" â†’ "I want paracetamol tablet"
[2026-03-01T03:06:47.461Z] === NEW REQUEST ===
[2026-03-01T03:06:47.462Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:06:47.467Z] Message: "yes combiflam tablet"
[2026-03-01T03:06:47.472Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2631,"name":"Heparin Injection"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:06:47.474Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:06:47.475Z] Top-of-handler state: stage=ask_quantity, pending={"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:06:47.476Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:06:47.487Z] Stage: ask_quantity
[2026-03-01T03:06:47.487Z] Pending medicine: {"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:06:47.488Z] Message: "yes combiflam tablet"
[2026-03-01T03:06:47.488Z] Is digits: false
[2026-03-01T03:06:47.489Z] Condition match: false
[2026-03-01T03:06:47.489Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:06:47.489Z] Message: "yes combiflam tablet"
[2026-03-01T03:06:47.490Z] Stage: ask_quantity
[2026-03-01T03:06:47.499Z] Pending medicine: {"id":2631,"name":"Heparin Injection"}
[2026-03-01T03:06:47.806Z] Grok result: {"medicines":[{"name":"combiflam","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:06:47.807Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:06:47.807Z] Processing medicine: combiflam, quantity: null
[2026-03-01T03:06:47.807Z] Detected language: en for medicine: combiflam
[2026-03-01T03:06:47.808Z] Enhanced medicine name: "combiflam" â†’ "combiflam"
[2026-03-01T03:07:14.108Z] === NEW REQUEST ===
[2026-03-01T03:07:14.109Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:07:14.110Z] Message: "Daha"
[2026-03-01T03:07:14.111Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:07:14.111Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:07:14.117Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:07:14.122Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:07:14.123Z] Stage: ask_quantity
[2026-03-01T03:07:14.123Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:07:14.124Z] Message: "Daha"
[2026-03-01T03:07:14.124Z] Is digits: false
[2026-03-01T03:07:14.125Z] Condition match: false
[2026-03-01T03:07:14.125Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:07:14.131Z] Message: "Daha"
[2026-03-01T03:07:14.136Z] Stage: ask_quantity
[2026-03-01T03:07:14.137Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:07:14.500Z] Grok result: {"medicines":[{"name":"Daha","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:07:14.502Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:07:14.504Z] Processing medicine: Daha, quantity: null
[2026-03-01T03:07:14.509Z] Detected language: en for medicine: Daha
[2026-03-01T03:07:14.511Z] Enhanced medicine name: "Daha" â†’ "Daha"
[2026-03-01T03:10:23.773Z] === NEW REQUEST ===
[2026-03-01T03:10:23.773Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:10:23.774Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-03-01T03:10:23.775Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:10:23.776Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:10:23.780Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:10:23.781Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:10:23.783Z] Stage: ask_quantity
[2026-03-01T03:10:23.787Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:10:23.788Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-03-01T03:10:23.789Z] Is digits: false
[2026-03-01T03:10:23.790Z] Condition match: false
[2026-03-01T03:10:23.792Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:10:23.802Z] Message: "Paracetamol apodiscounter 500 mg Tabletten-2"
[2026-03-01T03:10:23.804Z] Stage: ask_quantity
[2026-03-01T03:10:23.807Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:10:24.227Z] Grok result: {"medicines":[{"name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:10:24.228Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:10:24.228Z] Processing medicine: Paracetamol apodiscounter 500 mg Tabletten, quantity: 2
[2026-03-01T03:10:24.229Z] Detected language: en for medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-03-01T03:10:24.229Z] Enhanced medicine name: "Paracetamol apodiscounter 500 mg Tabletten" â†’ "Paracetamol apodiscounter 500 mg Tabletten"
[2026-03-01T03:10:24.231Z] Found medicine: Paracetamol apodiscounter 500 mg Tabletten
[2026-03-01T03:10:34.604Z] === NEW REQUEST ===
[2026-03-01T03:10:34.606Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:10:34.608Z] Message: "yes"
[2026-03-01T03:10:34.616Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2591,"name":"Combiflam Tablets"},"pendingPrescription":{"medicine_id":2519,"medicine_name":"Paracetamol apodiscounter 500 mg Tabletten","quantity":2,"price_per_tablet":"100.00"},"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:10:34.620Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:10:34.626Z] Top-of-handler state: stage=ask_quantity, pending={"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:10:34.630Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:10:34.634Z] Stage: ask_quantity
[2026-03-01T03:10:34.645Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:10:34.662Z] Message: "yes"
[2026-03-01T03:10:34.666Z] Is digits: false
[2026-03-01T03:10:34.669Z] Condition match: false
[2026-03-01T03:10:34.674Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:10:34.677Z] Message: "yes"
[2026-03-01T03:10:34.681Z] Stage: ask_quantity
[2026-03-01T03:10:34.686Z] Pending medicine: {"id":2591,"name":"Combiflam Tablets"}
[2026-03-01T03:10:34.690Z] === PRESCRIPTION YES RESPONSE DETECTED ===
[2026-03-01T03:10:34.701Z] Real-time stock update for Paracetamol apodiscounter 500 mg Tabletten: 1758 -> 1756 tablets (packets: 87 -> 87, individual: 16)
[2026-03-01T03:10:35.060Z] === SENDING PRESCRIPTION CONFIRMED RESPONSE ===
[2026-03-01T03:10:35.060Z] âœ… Paracetamol apodiscounter 500 mg Tabletten (2 tablets)
ðŸ’Š Price per tablet: â‚¹100.00
ðŸ“¦ Quantity: 2
ðŸ’° Total price: â‚¹200.00

ðŸŽ‰ Order Placed Successfully!

âš•ï¸ Prescription verified - Order completed safely
[2026-03-01T03:10:35.061Z] === END RESPONSE ===
[2026-03-01T03:17:27.944Z] === NEW REQUEST ===
[2026-03-01T03:17:27.949Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:17:27.952Z] Message: "Bala Paracetamol pahije"
[2026-03-01T03:17:27.953Z] Persisted session: undefined
[2026-03-01T03:17:27.954Z] Starting new session
[2026-03-01T03:17:27.960Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:17:27.966Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:17:27.967Z] Stage: initial
[2026-03-01T03:17:27.968Z] Pending medicine: null
[2026-03-01T03:17:27.973Z] Message: "Bala Paracetamol pahije"
[2026-03-01T03:17:27.979Z] Is digits: false
[2026-03-01T03:17:27.980Z] Condition match: false
[2026-03-01T03:17:27.981Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:17:27.982Z] Message: "Bala Paracetamol pahije"
[2026-03-01T03:17:27.985Z] Stage: initial
[2026-03-01T03:17:27.992Z] Pending medicine: null
[2026-03-01T03:17:28.409Z] Grok result: {"medicines":[{"name":"Bala Paracetamol","quantity":null}],"intent":"order","action":"order","language":"hi"}
[2026-03-01T03:17:28.410Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:17:28.411Z] Processing medicine: Bala Paracetamol, quantity: null
[2026-03-01T03:17:28.411Z] Detected language: hi for medicine: Bala Paracetamol
[2026-03-01T03:17:28.418Z] Enhanced medicine name: "Bala Paracetamol" â†’ "Bala Paracetamol"
[2026-03-01T03:17:38.913Z] === NEW REQUEST ===
[2026-03-01T03:17:38.914Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:17:38.921Z] Message: "I want paracetamol tablet"
[2026-03-01T03:17:38.925Z] Persisted session: undefined
[2026-03-01T03:17:38.926Z] Starting new session
[2026-03-01T03:17:38.927Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:17:38.931Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:17:38.940Z] Stage: initial
[2026-03-01T03:17:38.941Z] Pending medicine: null
[2026-03-01T03:17:38.941Z] Message: "I want paracetamol tablet"
[2026-03-01T03:17:38.942Z] Is digits: false
[2026-03-01T03:17:38.944Z] Condition match: false
[2026-03-01T03:17:38.947Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:17:38.952Z] Message: "I want paracetamol tablet"
[2026-03-01T03:17:38.953Z] Stage: initial
[2026-03-01T03:17:38.954Z] Pending medicine: null
[2026-03-01T03:17:39.273Z] Grok result: {"medicines":[{"name":"paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:17:39.273Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:17:39.273Z] Processing medicine: paracetamol, quantity: null
[2026-03-01T03:17:39.274Z] Detected language: en for medicine: paracetamol
[2026-03-01T03:17:39.275Z] Enhanced medicine name: "paracetamol" â†’ "paracetamol"
[2026-03-01T03:17:52.728Z] === NEW REQUEST ===
[2026-03-01T03:17:52.733Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:17:52.734Z] Message: "order the Paracetamol"
[2026-03-01T03:17:52.739Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:17:52.746Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:17:52.750Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:17:52.753Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:17:52.756Z] Stage: ask_quantity
[2026-03-01T03:17:52.758Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:17:52.759Z] Message: "order the Paracetamol"
[2026-03-01T03:17:52.760Z] Is digits: false
[2026-03-01T03:17:52.760Z] Condition match: false
[2026-03-01T03:17:52.761Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:17:52.762Z] Message: "order the Paracetamol"
[2026-03-01T03:17:52.763Z] Stage: ask_quantity
[2026-03-01T03:17:52.767Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:17:53.122Z] Grok result: {"medicines":[{"name":"order paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:17:53.122Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:17:53.123Z] Processing medicine: order paracetamol, quantity: null
[2026-03-01T03:17:53.123Z] Detected language: en for medicine: order paracetamol
[2026-03-01T03:17:53.123Z] Enhanced medicine name: "order paracetamol" â†’ "order paracetamol"
[2026-03-01T03:18:06.655Z] === NEW REQUEST ===
[2026-03-01T03:18:06.656Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:18:06.657Z] Message: "paracetamol tablets"
[2026-03-01T03:18:06.658Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:18:06.660Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:18:06.669Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:06.671Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:18:06.672Z] Stage: ask_quantity
[2026-03-01T03:18:06.676Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:06.682Z] Message: "paracetamol tablets"
[2026-03-01T03:18:06.683Z] Is digits: false
[2026-03-01T03:18:06.684Z] Condition match: false
[2026-03-01T03:18:06.685Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:18:06.685Z] Message: "paracetamol tablets"
[2026-03-01T03:18:06.685Z] Stage: ask_quantity
[2026-03-01T03:18:06.686Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:07.005Z] Grok result: {"medicines":[{"name":"paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:18:07.008Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:18:07.015Z] Processing medicine: paracetamol, quantity: null
[2026-03-01T03:18:07.016Z] Detected language: en for medicine: paracetamol
[2026-03-01T03:18:07.016Z] Enhanced medicine name: "paracetamol" â†’ "paracetamol"
[2026-03-01T03:18:38.053Z] === NEW REQUEST ===
[2026-03-01T03:18:38.054Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:18:38.056Z] Message: "please order paracetamol tablet"
[2026-03-01T03:18:38.064Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:18:38.065Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:18:38.066Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:38.067Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:18:38.074Z] Stage: ask_quantity
[2026-03-01T03:18:38.081Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:38.094Z] Message: "please order paracetamol tablet"
[2026-03-01T03:18:38.098Z] Is digits: false
[2026-03-01T03:18:38.104Z] Condition match: false
[2026-03-01T03:18:38.108Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:18:38.109Z] Message: "please order paracetamol tablet"
[2026-03-01T03:18:38.112Z] Stage: ask_quantity
[2026-03-01T03:18:38.117Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:38.410Z] Grok result: {"medicines":[{"name":"paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:18:38.411Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:18:38.411Z] Processing medicine: paracetamol, quantity: null
[2026-03-01T03:18:38.412Z] Detected language: en for medicine: paracetamol
[2026-03-01T03:18:38.412Z] Enhanced medicine name: "paracetamol" â†’ "paracetamol"
[2026-03-01T03:18:51.555Z] === NEW REQUEST ===
[2026-03-01T03:18:51.556Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:18:51.563Z] Message: "3 tablets"
[2026-03-01T03:18:51.567Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:18:51.568Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:18:51.569Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:51.570Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:18:51.577Z] Stage: ask_quantity
[2026-03-01T03:18:51.580Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:51.580Z] Message: "3 tablets"
[2026-03-01T03:18:51.581Z] Is digits: false
[2026-03-01T03:18:51.582Z] Condition match: false
[2026-03-01T03:18:51.583Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:18:51.589Z] Message: "3 tablets"
[2026-03-01T03:18:51.594Z] Stage: ask_quantity
[2026-03-01T03:18:51.595Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:18:51.914Z] Grok result: {"medicines":[{"name":"3 tablets","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:18:51.914Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:18:51.915Z] Processing medicine: 3 tablets, quantity: null
[2026-03-01T03:18:51.915Z] Detected language: en for medicine: 3 tablets
[2026-03-01T03:18:51.915Z] Enhanced medicine name: "3 tablets" â†’ "3 tablets"
[2026-03-01T03:19:05.987Z] === NEW REQUEST ===
[2026-03-01T03:19:05.988Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:19:05.990Z] Message: "please order paracetamol tablet"
[2026-03-01T03:19:05.999Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:19:06.000Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:19:06.005Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:19:06.012Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:19:06.016Z] Stage: ask_quantity
[2026-03-01T03:19:06.030Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:19:06.034Z] Message: "please order paracetamol tablet"
[2026-03-01T03:19:06.041Z] Is digits: false
[2026-03-01T03:19:06.042Z] Condition match: false
[2026-03-01T03:19:06.043Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:19:06.043Z] Message: "please order paracetamol tablet"
[2026-03-01T03:19:06.044Z] Stage: ask_quantity
[2026-03-01T03:19:06.049Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:19:06.372Z] Grok result: {"medicines":[{"name":"order paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:19:06.373Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:19:06.373Z] Processing medicine: order paracetamol, quantity: null
[2026-03-01T03:19:06.374Z] Detected language: en for medicine: order paracetamol
[2026-03-01T03:19:06.374Z] Enhanced medicine name: "order paracetamol" â†’ "order paracetamol"
[2026-03-01T03:19:24.612Z] === NEW REQUEST ===
[2026-03-01T03:19:24.618Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:19:24.624Z] Message: "I want paracetamol tablet"
[2026-03-01T03:19:24.625Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:19:24.639Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:19:24.644Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:19:24.651Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:19:24.654Z] Stage: ask_quantity
[2026-03-01T03:19:24.660Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:19:24.665Z] Message: "I want paracetamol tablet"
[2026-03-01T03:19:24.667Z] Is digits: false
[2026-03-01T03:19:24.669Z] Condition match: false
[2026-03-01T03:19:24.671Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:19:24.673Z] Message: "I want paracetamol tablet"
[2026-03-01T03:19:24.680Z] Stage: ask_quantity
[2026-03-01T03:19:24.685Z] Pending medicine: {"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:19:25.149Z] Grok result: {"medicines":[{"name":"paracetamol","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:19:25.150Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:19:25.150Z] Processing medicine: paracetamol, quantity: null
[2026-03-01T03:19:25.150Z] Detected language: en for medicine: paracetamol
[2026-03-01T03:19:25.151Z] Enhanced medicine name: "paracetamol" â†’ "paracetamol"
[2026-03-01T03:21:54.645Z] === NEW REQUEST ===
[2026-03-01T03:21:54.646Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:21:54.646Z] Message: "3"
[2026-03-01T03:21:54.647Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:21:54.648Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:21:54.650Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:21:54.651Z] Entering EARLY quantity branch with qty='3' for pending='{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}'
[2026-03-01T03:21:54.660Z] DB match for pending: Paracetamol apodiscounter 650 mg Tabletten
[2026-03-01T03:21:54.663Z] Real-time stock update for Paracetamol apodiscounter 650 mg Tabletten: 300 -> 297 tablets (packets: 30 -> 29, individual: 7)
[2026-03-01T03:21:54.739Z] EARLY ADDâœ… Paracetamol apodiscounter 650 mg Tabletten x3 | Cart: â‚¹1200.00
[2026-03-01T03:22:22.807Z] === NEW REQUEST ===
[2026-03-01T03:22:22.808Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:22:22.810Z] Message: "yes"
[2026-03-01T03:22:22.817Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":3,"price_per_tablet":"400.00","total_price":1200}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:22:22.819Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T03:22:22.820Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:22:22.822Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:22:22.832Z] Stage: initial
[2026-03-01T03:22:22.836Z] Pending medicine: null
[2026-03-01T03:22:22.846Z] Message: "yes"
[2026-03-01T03:22:22.847Z] Is digits: false
[2026-03-01T03:22:22.848Z] Condition match: false
[2026-03-01T03:22:22.849Z] User chose to proceed directly with current cart (Y)
[2026-03-01T03:23:31.357Z] === NEW REQUEST ===
[2026-03-01T03:23:31.357Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:23:31.358Z] Message: "Yes"
[2026-03-01T03:23:31.360Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":3,"price_per_tablet":"400.00","total_price":1200}],"stage":"confirm_order","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:23:31.365Z] Loaded existing session - Stage: confirm_order, Pending: null
[2026-03-01T03:23:31.366Z] Top-of-handler state: stage=confirm_order, pending=null
[2026-03-01T03:23:31.368Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:23:31.369Z] Stage: confirm_order
[2026-03-01T03:23:31.371Z] Pending medicine: null
[2026-03-01T03:23:31.385Z] Message: "Yes"
[2026-03-01T03:23:31.388Z] Is digits: false
[2026-03-01T03:23:31.389Z] Condition match: false
[2026-03-01T03:23:54.276Z] === NEW REQUEST ===
[2026-03-01T03:23:54.276Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:23:54.277Z] Message: "sumit chatur 22 123456789"
[2026-03-01T03:23:54.278Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":3,"price_per_tablet":"400.00","total_price":1200}],"stage":"ask_customer","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:23:54.278Z] Loaded existing session - Stage: ask_customer, Pending: null
[2026-03-01T03:23:54.279Z] Top-of-handler state: stage=ask_customer, pending=null
[2026-03-01T03:23:54.280Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:23:54.280Z] Stage: ask_customer
[2026-03-01T03:23:54.284Z] Pending medicine: null
[2026-03-01T03:23:54.285Z] Message: "sumit chatur 22 123456789"
[2026-03-01T03:23:54.287Z] Is digits: false
[2026-03-01T03:23:54.291Z] Condition match: false
[2026-03-01T03:24:07.713Z] === NEW REQUEST ===
[2026-03-01T03:24:07.714Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:24:07.715Z] Message: "sumit chatur 22 1234567890"
[2026-03-01T03:24:07.716Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":3,"price_per_tablet":"400.00","total_price":1200}],"stage":"ask_customer","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:24:07.716Z] Loaded existing session - Stage: ask_customer, Pending: null
[2026-03-01T03:24:07.718Z] Top-of-handler state: stage=ask_customer, pending=null
[2026-03-01T03:24:07.719Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:24:07.720Z] Stage: ask_customer
[2026-03-01T03:24:07.722Z] Pending medicine: null
[2026-03-01T03:24:07.723Z] Message: "sumit chatur 22 1234567890"
[2026-03-01T03:24:07.725Z] Is digits: false
[2026-03-01T03:24:07.726Z] Condition match: false
[2026-03-01T03:24:12.883Z] === NEW REQUEST ===
[2026-03-01T03:24:12.884Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:24:12.885Z] Message: "proceed"
[2026-03-01T03:24:12.886Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":3,"price_per_tablet":"400.00","total_price":1200}],"stage":"ready","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":"sumit chatur","age":22,"mobile":"1234567890"},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:24:12.886Z] Loaded existing session - Stage: ready, Pending: null
[2026-03-01T03:24:12.887Z] Top-of-handler state: stage=ready, pending=null
[2026-03-01T03:24:12.890Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:24:12.892Z] Stage: ready
[2026-03-01T03:24:12.894Z] Pending medicine: null
[2026-03-01T03:24:12.896Z] Message: "proceed"
[2026-03-01T03:24:12.899Z] Is digits: false
[2026-03-01T03:24:12.906Z] Condition match: false
[2026-03-01T03:24:25.051Z] === NEW REQUEST ===
[2026-03-01T03:24:25.051Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:24:25.052Z] Message: "yes"
[2026-03-01T03:24:25.053Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":3,"price_per_tablet":"400.00","total_price":1200}],"stage":"confirm_order","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":"sumit chatur","age":22,"mobile":"1234567890"},"stockFlow":{"stage":"idle","language":"en","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:24:25.053Z] Loaded existing session - Stage: confirm_order, Pending: null
[2026-03-01T03:24:25.054Z] Top-of-handler state: stage=confirm_order, pending=null
[2026-03-01T03:24:25.055Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:24:25.056Z] Stage: confirm_order
[2026-03-01T03:24:25.059Z] Pending medicine: null
[2026-03-01T03:24:25.059Z] Message: "yes"
[2026-03-01T03:24:25.060Z] Is digits: false
[2026-03-01T03:24:25.060Z] Condition match: false
[2026-03-01T03:24:25.207Z] Order confirmed: Paracetamol apodiscounter 650 mg Tabletten (3 tablets) - stock already deducted in real-time
[2026-03-01T03:29:04.289Z] === NEW REQUEST ===
[2026-03-01T03:29:04.289Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:29:04.303Z] Message: "Mala Paracetamol pahije"
[2026-03-01T03:29:04.317Z] Persisted session: undefined
[2026-03-01T03:29:04.414Z] Starting new session
[2026-03-01T03:29:04.427Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:29:04.428Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:29:04.428Z] Stage: initial
[2026-03-01T03:29:04.430Z] Pending medicine: null
[2026-03-01T03:29:04.440Z] Message: "Mala Paracetamol pahije"
[2026-03-01T03:29:04.441Z] Is digits: false
[2026-03-01T03:29:04.442Z] Condition match: false
[2026-03-01T03:29:04.442Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:29:04.454Z] Message: "Mala Paracetamol pahije"
[2026-03-01T03:29:04.455Z] Stage: initial
[2026-03-01T03:29:04.456Z] Pending medicine: null
[2026-03-01T03:29:05.268Z] Grok result: {"medicines":[{"name":"paracetamol","quantity":null}],"intent":"order","action":"order","language":"mr"}
[2026-03-01T03:29:05.268Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:29:05.269Z] Processing medicine: paracetamol, quantity: null
[2026-03-01T03:29:05.270Z] Detected language: mr for medicine: paracetamol
[2026-03-01T03:29:05.272Z] Enhanced medicine name: "paracetamol" â†’ "paracetamol"
[2026-03-01T03:29:15.163Z] === NEW REQUEST ===
[2026-03-01T03:29:15.165Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:29:15.167Z] Message: "Char goliyan"
[2026-03-01T03:29:15.177Z] Persisted session: {"sessionState":{"medicines":[],"stage":"ask_quantity","pendingMedicine":{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"},"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"mr","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:29:15.179Z] Loaded existing session - Stage: ask_quantity, Pending: [object Object]
[2026-03-01T03:29:15.181Z] Top-of-handler state: stage=ask_quantity, pending={"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}
[2026-03-01T03:29:15.185Z] Entering EARLY quantity branch with qty='Char goliyan' for pending='{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten"}'
[2026-03-01T03:29:15.194Z] DB match for pending: Paracetamol apodiscounter 650 mg Tabletten
[2026-03-01T03:29:15.208Z] Real-time stock update for Paracetamol apodiscounter 650 mg Tabletten: 297 -> 293 tablets (packets: 29 -> 29, individual: 3)
[2026-03-01T03:29:15.277Z] EARLY ADDâœ… Paracetamol apodiscounter 650 mg Tabletten x4 | Cart: â‚¹1600.00
[2026-03-01T03:29:59.959Z] === NEW REQUEST ===
[2026-03-01T03:29:59.960Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:29:59.962Z] Message: "yes yes"
[2026-03-01T03:29:59.966Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":4,"price_per_tablet":"400.00","total_price":1600}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"mr","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:29:59.971Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T03:29:59.972Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:29:59.987Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:29:59.996Z] Stage: initial
[2026-03-01T03:29:59.999Z] Pending medicine: null
[2026-03-01T03:30:00.001Z] Message: "yes yes"
[2026-03-01T03:30:00.001Z] Is digits: false
[2026-03-01T03:30:00.007Z] Condition match: false
[2026-03-01T03:30:00.013Z] === GROK AI MESSAGE PROCESSING ===
[2026-03-01T03:30:00.014Z] Message: "yes yes"
[2026-03-01T03:30:00.015Z] Stage: initial
[2026-03-01T03:30:00.017Z] Pending medicine: null
[2026-03-01T03:30:00.381Z] Grok result: {"medicines":[{"name":"yes yes","quantity":null}],"intent":"order","action":"order","language":"en"}
[2026-03-01T03:30:00.381Z] === ORDER INTENT DETECTED ===
[2026-03-01T03:30:00.382Z] Processing medicine: yes yes, quantity: null
[2026-03-01T03:30:00.382Z] Detected language: en for medicine: yes yes
[2026-03-01T03:30:00.383Z] Enhanced medicine name: "yes yes" â†’ "yes yes"
[2026-03-01T03:30:23.379Z] === NEW REQUEST ===
[2026-03-01T03:30:23.380Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:30:23.381Z] Message: "yes"
[2026-03-01T03:30:23.382Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":4,"price_per_tablet":"400.00","total_price":1600}],"stage":"initial","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"mr","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:30:23.383Z] Loaded existing session - Stage: initial, Pending: null
[2026-03-01T03:30:23.385Z] Top-of-handler state: stage=initial, pending=null
[2026-03-01T03:30:23.387Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:30:23.388Z] Stage: initial
[2026-03-01T03:30:23.389Z] Pending medicine: null
[2026-03-01T03:30:23.393Z] Message: "yes"
[2026-03-01T03:30:23.394Z] Is digits: false
[2026-03-01T03:30:23.394Z] Condition match: false
[2026-03-01T03:30:23.395Z] User chose to proceed directly with current cart (Y)
[2026-03-01T03:30:36.607Z] === NEW REQUEST ===
[2026-03-01T03:30:36.607Z] Session key: DEBUG_SESSION_KEY
[2026-03-01T03:30:36.608Z] Message: "No"
[2026-03-01T03:30:36.609Z] Persisted session: {"sessionState":{"medicines":[{"id":2521,"name":"Paracetamol apodiscounter 650 mg Tabletten","quantity":4,"price_per_tablet":"400.00","total_price":1600}],"stage":"confirm_order","pendingMedicine":null,"pendingPrescription":null,"customer":{"name":null,"age":null,"mobile":null},"stockFlow":{"stage":"idle","language":"mr","targetName":null,"lastMissingName":null,"previousConfig":null,"tempPackets":null,"tempTabsPerPacket":null,"tempPacketPrice":null},"stockAddFlow":{"stage":"idle","medicineName":null,"packets":null,"tabletsPerPacket":null,"packetPrice":null},"restockFlow":{"stage":"idle","medicineId":null,"medicineName":null,"quantity":null}},"expiresAt":1772389800000}
[2026-03-01T03:30:36.610Z] Loaded existing session - Stage: confirm_order, Pending: null
[2026-03-01T03:30:36.612Z] Top-of-handler state: stage=confirm_order, pending=null
[2026-03-01T03:30:36.613Z] === CHECKING QUANTITY RESPONSE ===
[2026-03-01T03:30:36.615Z] Stage: confirm_order
[2026-03-01T03:30:36.617Z] Pending medicine: null
[2026-03-01T03:30:36.620Z] Message: "No"
[2026-03-01T03:30:36.621Z] Is digits: false
[2026-03-01T03:30:36.623Z] Condition match: false
